<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Gibbon.Passes.Simplifier</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#simplifyL1"><span class="hs-identifier">simplifyL1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#simplifyLocBinds"><span class="hs-identifier">simplifyLocBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#lateInlineTriv"><span class="hs-identifier">lateInlineTriv</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/artem/.cabal/store/ghc-9.4.5/recursion-schemes-5.2.3-5c783cce65b62d0dbf9a28f427d4da1a27df54e177fbefd8856688c99c46858f/share/doc/html/src/Data.Functor.Foldable.html"><span class="hs-identifier">Data.Functor.Foldable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Foldable</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.html"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.OldList.html#isPrefixOf"><span class="hs-identifier">isPrefixOf</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Gibbon.Common.html"><span class="hs-identifier">Gibbon.Common</span></a></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Gibbon.Language.html"><span class="hs-identifier">Gibbon.Language</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html"><span class="hs-identifier">Gibbon.L1.Syntax</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html"><span class="hs-identifier">Gibbon.L2.Syntax</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html"><span class="hs-identifier">Gibbon.L4.Syntax</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L4</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Gibbon.Passes.Freshen.html"><span class="hs-identifier">Gibbon.Passes.Freshen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Passes.Freshen.html#freshNames1"><span class="hs-identifier">freshNames1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.Passes.Freshen.html#freshFun1"><span class="hs-identifier">freshFun1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#markRecFns"><span class="hs-identifier hs-type">markRecFns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span>
</span><span id="line-22"></span><span id="markRecFns"><span class="annot"><span class="annottext">markRecFns :: Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Simplifier.html#markRecFns"><span class="hs-identifier hs-var hs-var">markRecFns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span id="local-6989586621680977146"><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
</span><a href="#local-6989586621680977146"><span class="hs-identifier hs-var">ddefs</span></a></span></span><span> </span><span id="local-6989586621680977147"><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977147"><span class="hs-identifier hs-var">fundefs</span></a></span></span><span> </span><span id="local-6989586621680977148"><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="#local-6989586621680977148"><span class="hs-identifier hs-var">main</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977149"><span class="annot"><span class="annottext">fundefs' :: FunDefs Exp1
</span><a href="#local-6989586621680977149"><span class="hs-identifier hs-var hs-var">fundefs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunDef Exp1 -&gt; FunDef Exp1) -&gt; FunDefs Exp1 -&gt; FunDefs Exp1
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#map"><span class="hs-identifier hs-var">M.map</span></a></span><span>
</span><span id="line-24"></span><span>                     </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680977151"><span class="annot"><span class="annottext">fn :: FunDef Exp1
</span><a href="#local-6989586621680977151"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDef"><span class="hs-identifier hs-type">FunDef</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977153"><span class="annot"><span class="annottext">Var
funName :: Var
funName :: forall ex. FunDef ex -&gt; Var
</span><a href="#local-6989586621680977153"><span class="hs-identifier hs-var hs-var">funName</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977155"><span class="annot"><span class="annottext">Exp1
funBody :: Exp1
funBody :: forall ex. FunDef ex -&gt; ex
</span><a href="#local-6989586621680977155"><span class="hs-identifier hs-var hs-var">funBody</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977157"><span class="annot"><span class="annottext">FunMeta
funMeta :: FunMeta
funMeta :: forall ex. FunDef ex -&gt; FunMeta
</span><a href="#local-6989586621680977157"><span class="hs-identifier hs-var hs-var">funMeta</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-25"></span><span>                          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977153"><span class="hs-identifier hs-var">funName</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Set Var -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#member"><span class="hs-operator hs-var">`S.member`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp1 -&gt; Set Var
forall a. FreeVars a =&gt; a -&gt; Set Var
</span><a href="Gibbon.Language.Syntax.html#gFreeVars"><span class="hs-identifier hs-var">gFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977155"><span class="hs-identifier hs-var">funBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>                          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977151"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">funMeta :: FunMeta
</span><a href="Gibbon.Language.Syntax.html#funMeta"><span class="hs-identifier hs-var">funMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunMeta
</span><a href="#local-6989586621680977157"><span class="hs-identifier hs-var">funMeta</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">funRec :: FunRec
</span><a href="Gibbon.Language.Syntax.html#funRec"><span class="hs-identifier hs-var">funRec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunRec
</span><a href="Gibbon.Language.Syntax.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-27"></span><span>                          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977151"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>                     </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977147"><span class="hs-identifier hs-var">fundefs</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
-&gt; FunDefs Exp1 -&gt; Maybe (Exp1, TyOf Exp1) -&gt; Prog1
forall ex.
DDefs (TyOf ex) -&gt; FunDefs ex -&gt; Maybe (ex, TyOf ex) -&gt; Prog ex
</span><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-var">Prog</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
</span><a href="#local-6989586621680977146"><span class="hs-identifier hs-var">ddefs</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977149"><span class="hs-identifier hs-var">fundefs'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="#local-6989586621680977148"><span class="hs-identifier hs-var">main</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#inlineFuns"><span class="hs-identifier hs-type">inlineFuns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span>
</span><span id="line-32"></span><span id="inlineFuns"><span class="annot"><span class="annottext">inlineFuns :: Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Simplifier.html#inlineFuns"><span class="hs-identifier hs-var hs-var">inlineFuns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span id="local-6989586621680977201"><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
</span><a href="#local-6989586621680977201"><span class="hs-identifier hs-var">ddefs</span></a></span></span><span> </span><span id="local-6989586621680977202"><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977202"><span class="hs-identifier hs-var">fundefs</span></a></span></span><span> </span><span id="local-6989586621680977203"><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="#local-6989586621680977203"><span class="hs-identifier hs-var">main</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-33"></span><span>    </span><span id="local-6989586621680977204"><span class="annot"><span class="annottext">Maybe (Exp1, UrTy ())
</span><a href="#local-6989586621680977204"><span class="hs-identifier hs-var">main'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="#local-6989586621680977203"><span class="hs-identifier hs-var">main</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-34"></span><span>               </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, UrTy ()) -&gt; PassM (Maybe (Exp1, UrTy ()))
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, UrTy ())
forall a. Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-35"></span><span>               </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977205"><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977205"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977206"><span class="annot"><span class="annottext">TyOf Exp1
</span><a href="#local-6989586621680977206"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-36"></span><span>                 </span><span id="local-6989586621680977207"><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977207"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Base Exp1 Exp1 -&gt; PassM Exp1) -&gt; Exp1 -&gt; PassM Exp1
forall (m :: * -&gt; *) t a.
(Monad m, Traversable (Base t), Recursive t) =&gt;
(Base t a -&gt; m a) -&gt; t -&gt; m a
</span><a href="Gibbon.Common.html#cataM"><span class="hs-identifier hs-var">cataM</span></a></span><span> </span><span class="annot"><span class="annottext">Base Exp1 Exp1 -&gt; PassM Exp1
PreExpF E1Ext () (UrTy ()) Exp1 -&gt; PassM Exp1
</span><a href="#local-6989586621680977209"><span class="hs-identifier hs-var">go</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977205"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-37"></span><span>                 </span><span class="annot"><span class="annottext">Maybe (Exp1, UrTy ()) -&gt; PassM (Maybe (Exp1, UrTy ()))
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Exp1, UrTy ()) -&gt; PassM (Maybe (Exp1, UrTy ())))
-&gt; Maybe (Exp1, UrTy ()) -&gt; PassM (Maybe (Exp1, UrTy ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp1, UrTy ()) -&gt; Maybe (Exp1, UrTy ())
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977207"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyOf Exp1
UrTy ()
</span><a href="#local-6989586621680977206"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>    </span><span id="local-6989586621680977210"><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977210"><span class="hs-identifier hs-var">fundefs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FunDef Exp1 -&gt; PassM (FunDef Exp1))
-&gt; FunDefs Exp1 -&gt; PassM (FunDefs Exp1)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Map Var a -&gt; m (Map Var b)
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680977212"><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977212"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-39"></span><span>                           </span><span id="local-6989586621680977213"><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977213"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Base Exp1 Exp1 -&gt; PassM Exp1) -&gt; Exp1 -&gt; PassM Exp1
forall (m :: * -&gt; *) t a.
(Monad m, Traversable (Base t), Recursive t) =&gt;
(Base t a -&gt; m a) -&gt; t -&gt; m a
</span><a href="Gibbon.Common.html#cataM"><span class="hs-identifier hs-var">cataM</span></a></span><span> </span><span class="annot"><span class="annottext">Base Exp1 Exp1 -&gt; PassM Exp1
PreExpF E1Ext () (UrTy ()) Exp1 -&gt; PassM Exp1
</span><a href="#local-6989586621680977209"><span class="hs-identifier hs-var">go</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunDef Exp1 -&gt; Exp1
forall ex. FunDef ex -&gt; ex
</span><a href="Gibbon.Language.Syntax.html#funBody"><span class="hs-identifier hs-var">funBody</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977212"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>                           </span><span class="annot"><span class="annottext">FunDef Exp1 -&gt; PassM (FunDef Exp1)
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(FunDef Exp1 -&gt; PassM (FunDef Exp1))
-&gt; FunDef Exp1 -&gt; PassM (FunDef Exp1)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977212"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">funBody :: Exp1
</span><a href="Gibbon.Language.Syntax.html#funBody"><span class="hs-identifier hs-var">funBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977213"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>                     </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977202"><span class="hs-identifier hs-var">fundefs</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
-&gt; FunDefs Exp1 -&gt; Maybe (Exp1, TyOf Exp1) -&gt; Prog1
forall ex.
DDefs (TyOf ex) -&gt; FunDefs ex -&gt; Maybe (ex, TyOf ex) -&gt; Prog ex
</span><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-var">Prog</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
</span><a href="#local-6989586621680977201"><span class="hs-identifier hs-var">ddefs</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977210"><span class="hs-identifier hs-var">fundefs'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
Maybe (Exp1, UrTy ())
</span><a href="#local-6989586621680977204"><span class="hs-identifier hs-var">main'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="#local-6989586621680977209"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PreExpF"><span class="hs-identifier hs-type">PreExpF</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#E1Ext"><span class="hs-identifier hs-type">E1Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#UrTy"><span class="hs-identifier hs-type">UrTy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Exp1"><span class="hs-identifier hs-type">Exp1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Exp1"><span class="hs-identifier hs-type">Exp1</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span id="local-6989586621680977209"><span class="annot"><span class="annottext">go :: PreExpF E1Ext () (UrTy ()) Exp1 -&gt; PassM Exp1
</span><a href="#local-6989586621680977209"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621680977214"><span class="annot"><span class="annottext">PreExpF E1Ext () (UrTy ()) Exp1
</span><a href="#local-6989586621680977214"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-46"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PreExpF E1Ext () (UrTy ()) Exp1
</span><a href="#local-6989586621680977214"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppEF"><span class="hs-identifier hs-type">AppEF</span></a></span><span> </span><span id="local-6989586621680977216"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977216"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621680977217"><span class="annot"><span class="annottext">[Exp1]
</span><a href="#local-6989586621680977217"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-48"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977218"><span class="annot"><span class="annottext">fn :: FunDef Exp1
</span><a href="#local-6989586621680977218"><span class="hs-identifier hs-var hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977202"><span class="hs-identifier hs-var">fundefs</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1 -&gt; Var -&gt; FunDef Exp1
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#%21"><span class="hs-operator hs-var">M.!</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977216"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-49"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">FunMeta -&gt; FunInline
</span><a href="Gibbon.Language.Syntax.html#funInline"><span class="hs-identifier hs-var">funInline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunDef Exp1 -&gt; FunMeta
forall ex. FunDef ex -&gt; FunMeta
</span><a href="Gibbon.Language.Syntax.html#funMeta"><span class="hs-identifier hs-var">funMeta</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977218"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FunInline -&gt; FunInline -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">FunInline
</span><a href="Gibbon.Language.Syntax.html#Inline"><span class="hs-identifier hs-var">Inline</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">FunMeta -&gt; FunRec
</span><a href="Gibbon.Language.Syntax.html#funRec"><span class="hs-identifier hs-var">funRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunDef Exp1 -&gt; FunMeta
forall ex. FunDef ex -&gt; FunMeta
</span><a href="Gibbon.Language.Syntax.html#funMeta"><span class="hs-identifier hs-var">funMeta</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977218"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FunRec -&gt; FunRec -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">FunRec
</span><a href="Gibbon.Language.Syntax.html#NotRec"><span class="hs-identifier hs-var">NotRec</span></a></span><span>
</span><span id="line-50"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-51"></span><span>                </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDef"><span class="hs-identifier hs-type">FunDef</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977224"><span class="annot"><span class="annottext">[Var]
funArgs :: [Var]
funArgs :: forall ex. FunDef ex -&gt; [Var]
</span><a href="#local-6989586621680977224"><span class="hs-identifier hs-var hs-var">funArgs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977226"><span class="annot"><span class="annottext">ArrowTy (TyOf Exp1)
funTy :: ArrowTy (TyOf Exp1)
funTy :: forall ex. FunDef ex -&gt; ArrowTy (TyOf ex)
</span><a href="#local-6989586621680977226"><span class="hs-identifier hs-var hs-var">funTy</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977228"><span class="annot"><span class="annottext">Exp1
funBody :: forall ex. FunDef ex -&gt; ex
funBody :: Exp1
</span><a href="Gibbon.Language.Syntax.html#funBody"><span class="hs-identifier hs-var hs-var">funBody</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FunDef Exp1 -&gt; PassM (FunDef Exp1)
</span><a href="Gibbon.Passes.Freshen.html#freshFun1"><span class="hs-identifier hs-var">freshFun1</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977218"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-52"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977229"><span class="annot"><span class="annottext">in_tys :: [UrTy ()]
</span><a href="#local-6989586621680977229"><span class="hs-identifier hs-var hs-var">in_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([UrTy ()], UrTy ()) -&gt; [UrTy ()]
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">([UrTy ()], UrTy ())
ArrowTy (TyOf Exp1)
</span><a href="#local-6989586621680977226"><span class="hs-identifier hs-var">funTy</span></a></span><span>
</span><span id="line-53"></span><span>                    </span><span id="local-6989586621680977231"><span class="annot"><span class="annottext">binds :: [(Var, [()], UrTy (), Exp1)]
</span><a href="#local-6989586621680977231"><span class="hs-identifier hs-var hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Var, UrTy (), Exp1) -&gt; (Var, [()], UrTy (), Exp1))
-&gt; [(Var, UrTy (), Exp1)] -&gt; [(Var, [()], UrTy (), Exp1)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680977232"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977232"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977233"><span class="annot"><span class="annottext">UrTy ()
</span><a href="#local-6989586621680977233"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977234"><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977234"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977232"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><span class="annottext">UrTy ()
</span><a href="#local-6989586621680977233"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977234"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; [UrTy ()] -&gt; [Exp1] -&gt; [(Var, UrTy (), Exp1)]
forall a b c. [a] -&gt; [b] -&gt; [c] -&gt; [(a, b, c)]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#zip3"><span class="hs-identifier hs-var">zip3</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977224"><span class="hs-identifier hs-var">funArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[UrTy ()]
</span><a href="#local-6989586621680977229"><span class="hs-identifier hs-var">in_tys</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp1]
</span><a href="#local-6989586621680977217"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>                </span><span class="annot"><span class="annottext">Exp1 -&gt; PassM Exp1
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp1 -&gt; PassM Exp1) -&gt; Exp1 -&gt; PassM Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, [()], UrTy (), Exp1)] -&gt; Exp1 -&gt; Exp1
forall loc dec (ext :: * -&gt; * -&gt; *).
[(Var, [loc], dec, PreExp ext loc dec)]
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.html#mkLets"><span class="hs-identifier hs-var">mkLets</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, [()], UrTy (), Exp1)]
</span><a href="#local-6989586621680977231"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977228"><span class="hs-identifier hs-var">funBody</span></a></span><span>
</span><span id="line-55"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-56"></span><span>                </span><span id="local-6989586621680977237"><span class="annot"><span class="annottext">[Exp1]
</span><a href="#local-6989586621680977237"><span class="hs-identifier hs-var">args'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Exp1 -&gt; PassM Exp1) -&gt; [Exp1] -&gt; PassM [Exp1]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PreExpF E1Ext () (UrTy ()) Exp1 -&gt; PassM Exp1
</span><a href="#local-6989586621680977209"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(PreExpF E1Ext () (UrTy ()) Exp1 -&gt; PassM Exp1)
-&gt; (Exp1 -&gt; PreExpF E1Ext () (UrTy ()) Exp1) -&gt; Exp1 -&gt; PassM Exp1
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Exp1 -&gt; Base Exp1 Exp1
Exp1 -&gt; PreExpF E1Ext () (UrTy ()) Exp1
forall t. Recursive t =&gt; t -&gt; Base t t
</span><a href="file:///home/artem/.cabal/store/ghc-9.4.5/recursion-schemes-5.2.3-5c783cce65b62d0dbf9a28f427d4da1a27df54e177fbefd8856688c99c46858f/share/doc/html/src/Data.Functor.Foldable.html#project"><span class="hs-identifier hs-var">project</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp1]
</span><a href="#local-6989586621680977217"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-57"></span><span>                </span><span class="annot"><span class="annottext">Exp1 -&gt; PassM Exp1
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp1 -&gt; PassM Exp1) -&gt; Exp1 -&gt; PassM Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; [()] -&gt; [Exp1] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-var">AppE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977216"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Exp1]
</span><a href="#local-6989586621680977237"><span class="hs-identifier hs-var">args'</span></a></span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><span class="annottext">PreExpF E1Ext () (UrTy ()) Exp1
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp1 -&gt; PassM Exp1
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp1 -&gt; PassM Exp1) -&gt; Exp1 -&gt; PassM Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Base Exp1 Exp1 -&gt; Exp1
forall t. Corecursive t =&gt; Base t t -&gt; t
</span><a href="file:///home/artem/.cabal/store/ghc-9.4.5/recursion-schemes-5.2.3-5c783cce65b62d0dbf9a28f427d4da1a27df54e177fbefd8856688c99c46858f/share/doc/html/src/Data.Functor.Foldable.html#embed"><span class="hs-identifier hs-var">embed</span></a></span><span> </span><span class="annot"><span class="annottext">Base Exp1 Exp1
PreExpF E1Ext () (UrTy ()) Exp1
</span><a href="#local-6989586621680977214"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#deadFunElim"><span class="hs-identifier hs-type">deadFunElim</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span>
</span><span id="line-61"></span><span id="deadFunElim"><span class="annot"><span class="annottext">deadFunElim :: Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Simplifier.html#deadFunElim"><span class="hs-identifier hs-var hs-var">deadFunElim</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span id="local-6989586621680977267"><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
</span><a href="#local-6989586621680977267"><span class="hs-identifier hs-var">ddefs</span></a></span></span><span> </span><span id="local-6989586621680977268"><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977268"><span class="hs-identifier hs-var">fundefs</span></a></span></span><span> </span><span id="local-6989586621680977269"><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="#local-6989586621680977269"><span class="hs-identifier hs-var">main</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977270"><span class="annot"><span class="annottext">used :: Set Var
</span><a href="#local-6989586621680977270"><span class="hs-identifier hs-var hs-var">used</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="#local-6989586621680977269"><span class="hs-identifier hs-var">main</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-63"></span><span>                 </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Var
forall a. Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">S.empty</span></a></span><span>
</span><span id="line-64"></span><span>                 </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977272"><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977272"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">TyOf Exp1
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp1 -&gt; Set Var
forall a. FreeVars a =&gt; a -&gt; Set Var
</span><a href="Gibbon.Language.Syntax.html#gFreeVars"><span class="hs-identifier hs-var">gFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977272"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977273"><span class="annot"><span class="annottext">used' :: Set Var
</span><a href="#local-6989586621680977273"><span class="hs-identifier hs-var hs-var">used'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Var -&gt; Set Var -&gt; Set Var -&gt; Set Var
</span><a href="#local-6989586621680977274"><span class="hs-identifier hs-var">getUsedFns</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977270"><span class="hs-identifier hs-var">used</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
forall a. Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">S.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977270"><span class="hs-identifier hs-var">used</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977275"><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977275"><span class="hs-identifier hs-var">fundefs'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977276"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977276"><span class="hs-identifier hs-var">deleted</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-67"></span><span>            </span><span class="annot"><span class="annottext">(FunDef Exp1 -&gt; (FunDefs Exp1, [Var]) -&gt; (FunDefs Exp1, [Var]))
-&gt; (FunDefs Exp1, [Var]) -&gt; FunDefs Exp1 -&gt; (FunDefs Exp1, [Var])
forall a b k. (a -&gt; b -&gt; b) -&gt; b -&gt; Map k a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#foldr"><span class="hs-identifier hs-var">M.foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680977278"><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977278"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977279"><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977279"><span class="hs-identifier hs-var">acc1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977280"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977280"><span class="hs-identifier hs-var">acc2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-68"></span><span>                         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977281"><span class="annot"><span class="annottext">f :: Var
</span><a href="#local-6989586621680977281"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunDef Exp1 -&gt; Var
forall ex. FunDef ex -&gt; Var
</span><a href="Gibbon.Language.Syntax.html#funName"><span class="hs-identifier hs-var">funName</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977278"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-69"></span><span>                           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977281"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Set Var -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#member"><span class="hs-operator hs-var">`S.member`</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977273"><span class="hs-identifier hs-var">used'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.OldList.html#isPrefixOf"><span class="hs-identifier hs-var">L.isPrefixOf</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; [Char]
</span><a href="Gibbon.Common.html#fromVar"><span class="hs-identifier hs-var">fromVar</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977281"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>                           </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; FunDef Exp1 -&gt; FunDefs Exp1 -&gt; FunDefs Exp1
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977281"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp1
</span><a href="#local-6989586621680977278"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977279"><span class="hs-identifier hs-var">acc1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977280"><span class="hs-identifier hs-var">acc2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>                           </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977279"><span class="hs-identifier hs-var">acc1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977281"><span class="hs-identifier hs-var">f</span></a></span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Var]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977280"><span class="hs-identifier hs-var">acc2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunDefs Exp1
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>                    </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977268"><span class="hs-identifier hs-var">fundefs</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; [Char] -&gt; PassM Prog1 -&gt; PassM Prog1
forall a. Int -&gt; [Char] -&gt; a -&gt; a
</span><a href="Gibbon.Common.html#dbgTrace"><span class="hs-identifier hs-var">dbgTrace</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Removed unused functions: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Var] -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977276"><span class="hs-identifier hs-var">deleted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PassM Prog1 -&gt; PassM Prog1) -&gt; PassM Prog1 -&gt; PassM Prog1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-75"></span><span>      </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
-&gt; FunDefs Exp1 -&gt; Maybe (Exp1, TyOf Exp1) -&gt; Prog1
forall ex.
DDefs (TyOf ex) -&gt; FunDefs ex -&gt; Maybe (ex, TyOf ex) -&gt; Prog ex
</span><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-var">Prog</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
</span><a href="#local-6989586621680977267"><span class="hs-identifier hs-var">ddefs</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977275"><span class="hs-identifier hs-var">fundefs'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
</span><a href="#local-6989586621680977269"><span class="hs-identifier hs-var">main</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="#local-6989586621680977274"><span class="hs-identifier hs-type">getUsedFns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">S.Set</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">S.Set</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">S.Set</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">S.Set</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621680977274"><span class="annot"><span class="annottext">getUsedFns :: Set Var -&gt; Set Var -&gt; Set Var -&gt; Set Var
</span><a href="#local-6989586621680977274"><span class="hs-identifier hs-var hs-var">getUsedFns</span></a></span></span><span> </span><span id="local-6989586621680977288"><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977288"><span class="hs-identifier hs-var">todo</span></a></span></span><span> </span><span id="local-6989586621680977289"><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977289"><span class="hs-identifier hs-var">inspected</span></a></span></span><span> </span><span id="local-6989586621680977290"><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977290"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-79"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Set Var -&gt; Bool
forall a. Set a -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#null"><span class="hs-identifier hs-var">S.null</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977288"><span class="hs-identifier hs-var">todo</span></a></span><span>
</span><span id="line-80"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977290"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-81"></span><span>      </span><span class="hs-keyword">else</span><span>
</span><span id="line-82"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977292"><span class="annot"><span class="annottext">f :: Var
</span><a href="#local-6989586621680977292"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Set Var -&gt; Var
forall a. Int -&gt; Set a -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#elemAt"><span class="hs-identifier hs-var">S.elemAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977288"><span class="hs-identifier hs-var">todo</span></a></span><span>
</span><span id="line-83"></span><span>            </span><span id="local-6989586621680977294"><span class="annot"><span class="annottext">todo' :: Set Var
</span><a href="#local-6989586621680977294"><span class="hs-identifier hs-var hs-var">todo'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Set Var -&gt; Set Var
forall a. Int -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#deleteAt"><span class="hs-identifier hs-var">S.deleteAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977288"><span class="hs-identifier hs-var">todo</span></a></span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977292"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Set Var -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#member"><span class="hs-operator hs-var">`S.member`</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977289"><span class="hs-identifier hs-var">inspected</span></a></span><span>
</span><span id="line-85"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Set Var -&gt; Set Var -&gt; Set Var -&gt; Set Var
</span><a href="#local-6989586621680977274"><span class="hs-identifier hs-var">getUsedFns</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977294"><span class="hs-identifier hs-var">todo'</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977289"><span class="hs-identifier hs-var">inspected</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977290"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-86"></span><span>           </span><span class="hs-keyword">else</span><span>
</span><span id="line-87"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDef"><span class="hs-identifier hs-type">FunDef</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977296"><span class="annot"><span class="annottext">[Var]
funArgs :: forall ex. FunDef ex -&gt; [Var]
funArgs :: [Var]
</span><a href="Gibbon.Language.Syntax.html#funArgs"><span class="hs-identifier hs-var hs-var">funArgs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680977297"><span class="annot"><span class="annottext">Var
funName :: forall ex. FunDef ex -&gt; Var
funName :: Var
</span><a href="Gibbon.Language.Syntax.html#funName"><span class="hs-identifier hs-var hs-var">funName</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977298"><span class="annot"><span class="annottext">Exp1
funBody :: forall ex. FunDef ex -&gt; ex
funBody :: Exp1
</span><a href="Gibbon.Language.Syntax.html#funBody"><span class="hs-identifier hs-var hs-var">funBody</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680977268"><span class="hs-identifier hs-var">fundefs</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1 -&gt; Var -&gt; FunDef Exp1
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#%21"><span class="hs-operator hs-var">M.!</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977292"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-88"></span><span>                 </span><span id="local-6989586621680977299"><span class="annot"><span class="annottext">free :: Set Var
</span><a href="#local-6989586621680977299"><span class="hs-identifier hs-var hs-var">free</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp1 -&gt; Set Var
forall a. FreeVars a =&gt; a -&gt; Set Var
</span><a href="Gibbon.Language.Syntax.html#gFreeVars"><span class="hs-identifier hs-var">gFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">Exp1
</span><a href="#local-6989586621680977298"><span class="hs-identifier hs-var">funBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set Var -&gt; Set Var -&gt; Set Var
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#difference"><span class="hs-operator hs-var">`S.difference`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; Set Var
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977297"><span class="hs-identifier hs-var">funName</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Var]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977296"><span class="hs-identifier hs-var">funArgs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Set Var -&gt; Set Var -&gt; Set Var -&gt; Set Var
</span><a href="#local-6989586621680977274"><span class="hs-identifier hs-var">getUsedFns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977299"><span class="hs-identifier hs-var">free</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var -&gt; Set Var -&gt; Set Var
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977294"><span class="hs-identifier hs-var">todo'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Set Var -&gt; Set Var
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#insert"><span class="hs-identifier hs-var">S.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977292"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977289"><span class="hs-identifier hs-var">inspected</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977290"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var -&gt; Set Var -&gt; Set Var
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977299"><span class="hs-identifier hs-var">free</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#simplifyL1"><span class="hs-identifier hs-type">simplifyL1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span>
</span><span id="line-92"></span><span id="simplifyL1"><span class="annot"><span class="annottext">simplifyL1 :: Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Simplifier.html#simplifyL1"><span class="hs-identifier hs-var hs-var">simplifyL1</span></a></span></span><span> </span><span id="local-6989586621680977308"><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977308"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-93"></span><span>    </span><span id="local-6989586621680977309"><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977309"><span class="hs-identifier hs-var">p0'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Freshen.html#freshNames1"><span class="hs-identifier hs-var">freshNames1</span></a></span><span> </span><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977308"><span class="hs-identifier hs-var">p0</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span id="local-6989586621680977310"><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977310"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Simplifier.html#markRecFns"><span class="hs-identifier hs-var">markRecFns</span></a></span><span> </span><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977309"><span class="hs-identifier hs-var">p0'</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span id="local-6989586621680977311"><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977311"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Simplifier.html#inlineFuns"><span class="hs-identifier hs-var">inlineFuns</span></a></span><span> </span><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977310"><span class="hs-identifier hs-var">p1</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span id="local-6989586621680977312"><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977312"><span class="hs-identifier hs-var">p3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
</span><a href="Gibbon.Passes.Simplifier.html#deadFunElim"><span class="hs-identifier hs-var">deadFunElim</span></a></span><span> </span><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977311"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><span class="annottext">Prog1 -&gt; PassM Prog1
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Prog1
</span><a href="#local-6989586621680977312"><span class="hs-identifier hs-var">p3</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#simplifyLocBinds"><span class="hs-identifier hs-type">simplifyLocBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Prog2"><span class="hs-identifier hs-type">Prog2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Prog2"><span class="hs-identifier hs-type">Prog2</span></a></span><span>
</span><span id="line-102"></span><span id="simplifyLocBinds"><span class="annot"><span class="annottext">simplifyLocBinds :: Bool -&gt; Prog2 -&gt; PassM Prog2
</span><a href="Gibbon.Passes.Simplifier.html#simplifyLocBinds"><span class="hs-identifier hs-var hs-var">simplifyLocBinds</span></a></span></span><span> </span><span id="local-6989586621680977333"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977333"><span class="hs-identifier hs-var">only_cse</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span id="local-6989586621680977334"><span class="annot"><span class="annottext">DDefs (TyOf Exp2)
</span><a href="#local-6989586621680977334"><span class="hs-identifier hs-var">ddefs</span></a></span></span><span> </span><span id="local-6989586621680977335"><span class="annot"><span class="annottext">FunDefs Exp2
</span><a href="#local-6989586621680977335"><span class="hs-identifier hs-var">fundefs</span></a></span></span><span> </span><span id="local-6989586621680977336"><span class="annot"><span class="annottext">Maybe (Exp2, TyOf Exp2)
</span><a href="#local-6989586621680977336"><span class="hs-identifier hs-var">mainExp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977337"><span class="annot"><span class="annottext">fundefs' :: FunDefs Exp2
</span><a href="#local-6989586621680977337"><span class="hs-identifier hs-var hs-var">fundefs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunDef Exp2 -&gt; FunDef Exp2) -&gt; FunDefs Exp2 -&gt; FunDefs Exp2
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#map"><span class="hs-identifier hs-var">M.map</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef Exp2 -&gt; FunDef Exp2
</span><a href="#local-6989586621680977338"><span class="hs-identifier hs-var">gofun</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp2
</span><a href="#local-6989586621680977335"><span class="hs-identifier hs-var">fundefs</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977339"><span class="annot"><span class="annottext">mainExp' :: Maybe (Exp2, UrTy Var)
</span><a href="#local-6989586621680977339"><span class="hs-identifier hs-var hs-var">mainExp'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Exp2, TyOf Exp2)
</span><a href="#local-6989586621680977336"><span class="hs-identifier hs-var">mainExp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-105"></span><span>                     </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977340"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977340"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977341"><span class="annot"><span class="annottext">TyOf Exp2
</span><a href="#local-6989586621680977341"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Exp2, UrTy Var) -&gt; Maybe (Exp2, UrTy Var)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977342"><span class="hs-identifier hs-var">simpl</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977340"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyOf Exp2
UrTy Var
</span><a href="#local-6989586621680977341"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>                     </span><span class="annot"><span class="annottext">Maybe (Exp2, TyOf Exp2)
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Exp2, UrTy Var)
forall a. Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><span class="annottext">Prog2 -&gt; PassM Prog2
forall a. a -&gt; PassM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog2 -&gt; PassM Prog2) -&gt; Prog2 -&gt; PassM Prog2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf Exp2)
-&gt; FunDefs Exp2 -&gt; Maybe (Exp2, TyOf Exp2) -&gt; Prog2
forall ex.
DDefs (TyOf ex) -&gt; FunDefs ex -&gt; Maybe (ex, TyOf ex) -&gt; Prog ex
</span><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-var">Prog</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf Exp2)
</span><a href="#local-6989586621680977334"><span class="hs-identifier hs-var">ddefs</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp2
</span><a href="#local-6989586621680977337"><span class="hs-identifier hs-var">fundefs'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Exp2, TyOf Exp2)
Maybe (Exp2, UrTy Var)
</span><a href="#local-6989586621680977339"><span class="hs-identifier hs-var">mainExp'</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>    </span><span id="local-6989586621680977342"><span class="annot"><span class="annottext">simpl :: Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977342"><span class="hs-identifier hs-var hs-var">simpl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977333"><span class="hs-identifier hs-var">only_cse</span></a></span><span>
</span><span id="line-111"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span>
</span><span id="line-112"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; (Exp2 -&gt; Exp2) -&gt; Exp2 -&gt; Exp2
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; (Exp2 -&gt; Exp2) -&gt; Exp2 -&gt; Exp2
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span>    </span><span id="local-6989586621680977338"><span class="annot"><span class="annottext">gofun :: FunDef Exp2 -&gt; FunDef Exp2
</span><a href="#local-6989586621680977338"><span class="hs-identifier hs-var hs-var">gofun</span></a></span></span><span> </span><span id="local-6989586621680977346"><span class="annot"><span class="annottext">f :: FunDef Exp2
</span><a href="#local-6989586621680977346"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDef"><span class="hs-identifier hs-type">FunDef</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977347"><span class="annot"><span class="annottext">Exp2
funBody :: forall ex. FunDef ex -&gt; ex
funBody :: Exp2
</span><a href="Gibbon.Language.Syntax.html#funBody"><span class="hs-identifier hs-var hs-var">funBody</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-115"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977348"><span class="annot"><span class="annottext">funBody' :: Exp2
</span><a href="#local-6989586621680977348"><span class="hs-identifier hs-var hs-var">funBody'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977342"><span class="hs-identifier hs-var">simpl</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977347"><span class="hs-identifier hs-var">funBody</span></a></span><span>
</span><span id="line-116"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">FunDef Exp2
</span><a href="#local-6989586621680977346"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">funBody :: Exp2
</span><a href="Gibbon.Language.Syntax.html#funBody"><span class="hs-identifier hs-var">funBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977348"><span class="hs-identifier hs-var">funBody'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-comment">-- partially evaluate location arithmetic</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><a href="#local-6989586621680977345"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span class="hs-special">,</span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span id="local-6989586621680977345"><span class="annot"><span class="annottext">go :: Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621680977350"><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680977351"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977351"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-121"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977351"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-type">AppE</span></a></span><span> </span><span id="local-6989586621680977352"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977352"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680977353"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977353"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680977354"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977354"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-var">AppE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977352"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977353"><span class="hs-identifier hs-var">locs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977354"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span id="local-6989586621680977356"><span class="annot"><span class="annottext">Prim (UrTy Var)
</span><a href="#local-6989586621680977356"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680977357"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977357"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Prim (UrTy Var) -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Prim dec -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-var">PrimAppE</span></a></span><span> </span><span class="annot"><span class="annottext">Prim (UrTy Var)
</span><a href="#local-6989586621680977356"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977357"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977359"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977359"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977360"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977360"><span class="hs-identifier hs-var">locs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977361"><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977361"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977362"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977362"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680977363"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977363"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Var, [Var], UrTy Var, Exp2) -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
(Var, [loc], dec, PreExp ext loc dec)
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-var">LetE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977359"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977360"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977361"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977362"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977363"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-type">IfE</span></a></span><span> </span><span id="local-6989586621680977365"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977365"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680977366"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977366"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680977367"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977367"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2 -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-var">IfE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977365"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977366"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977367"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-type">MkProdE</span></a></span><span> </span><span id="local-6989586621680977369"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977369"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
[PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-var">MkProdE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977369"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-type">ProjE</span></a></span><span> </span><span id="local-6989586621680977371"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977371"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680977372"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977372"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Int -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-var">ProjE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977371"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977372"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span id="local-6989586621680977374"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977374"><span class="hs-identifier hs-var">scrt</span></a></span></span><span> </span><span id="local-6989586621680977375"><span class="annot"><span class="annottext">[([Char], [(Var, Var)], Exp2)]
</span><a href="#local-6989586621680977375"><span class="hs-identifier hs-var">brs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; [([Char], [(Var, Var)], Exp2)] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; [([Char], [(Var, loc)], PreExp ext loc dec)]
-&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-var">CaseE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977374"><span class="hs-identifier hs-var">scrt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(([Char], [(Var, Var)], Exp2) -&gt; ([Char], [(Var, Var)], Exp2))
-&gt; [([Char], [(Var, Var)], Exp2)] -&gt; [([Char], [(Var, Var)], Exp2)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680977376"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977376"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977377"><span class="annot"><span class="annottext">[(Var, Var)]
</span><a href="#local-6989586621680977377"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977378"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977378"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977376"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(Var, Var)]
</span><a href="#local-6989586621680977377"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977378"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[([Char], [(Var, Var)], Exp2)]
</span><a href="#local-6989586621680977375"><span class="hs-identifier hs-var">brs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-type">DataConE</span></a></span><span> </span><span id="local-6989586621680977380"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977380"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680977381"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977381"><span class="hs-identifier hs-var">dcon</span></a></span></span><span> </span><span id="local-6989586621680977382"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977382"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Char] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
loc -&gt; [Char] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-var">DataConE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977380"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977381"><span class="hs-identifier hs-var">dcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977382"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-type">TimeIt</span></a></span><span> </span><span id="local-6989586621680977384"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977384"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680977385"><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977385"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977386"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977386"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; UrTy Var -&gt; Bool -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec -&gt; dec -&gt; Bool -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-var">TimeIt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977384"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977385"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977386"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-131"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-type">WithArenaE</span></a></span><span> </span><span id="local-6989586621680977388"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977388"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680977389"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977389"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-var">WithArenaE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977388"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977389"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-type">SpawnE</span></a></span><span> </span><span id="local-6989586621680977391"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977391"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680977392"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977392"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680977393"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977393"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-var">SpawnE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977391"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977392"><span class="hs-identifier hs-var">locs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977393"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span id="local-6989586621680977395"><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977395"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-134"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977395"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-135"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-type">LetRegionE</span></a></span><span> </span><span id="local-6989586621680977397"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977397"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680977398"><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977398"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621680977399"><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977399"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977400"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977400"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec.
Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-var">LetRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977397"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977398"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977399"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977400"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-type">LetParRegionE</span></a></span><span> </span><span id="local-6989586621680977402"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977402"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680977403"><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977403"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621680977404"><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977404"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977405"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977405"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec.
Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-var">LetParRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977402"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977403"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977404"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977405"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">LetLocE</span></a></span><span> </span><span id="local-6989586621680977407"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977407"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L2.Syntax.html#AfterConstantLE"><span class="hs-identifier hs-type">AfterConstantLE</span></a></span><span> </span><span id="local-6989586621680977409"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977409"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680977410"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977410"><span class="hs-identifier hs-var">loc2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680977411"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977411"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-138"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Map Var (Var, Int) -&gt; Maybe (Var, Int)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977410"><span class="hs-identifier hs-var">loc2</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-139"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Var, Int)
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-140"></span><span>                  </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="annot"><span class="annottext">(E2Ext Var (UrTy Var) -&gt; Exp2) -&gt; E2Ext Var (UrTy Var) -&gt; Exp2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; PreLocExp Var -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. Var -&gt; PreLocExp loc -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-var">LetLocE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977407"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Var -&gt; PreLocExp Var
forall loc. Int -&gt; loc -&gt; PreLocExp loc
</span><a href="Gibbon.L2.Syntax.html#AfterConstantLE"><span class="hs-identifier hs-var">AfterConstantLE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977409"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977410"><span class="hs-identifier hs-var">loc2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Exp2 -&gt; E2Ext Var (UrTy Var)) -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-141"></span><span>                        </span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; (Var, Int) -&gt; Map Var (Var, Int) -&gt; Map Var (Var, Int)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977407"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977410"><span class="hs-identifier hs-var">loc2</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977409"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977411"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-142"></span><span>                </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977413"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977413"><span class="hs-identifier hs-var">loc3</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977414"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977414"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-143"></span><span>                  </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="annot"><span class="annottext">(E2Ext Var (UrTy Var) -&gt; Exp2) -&gt; E2Ext Var (UrTy Var) -&gt; Exp2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; PreLocExp Var -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. Var -&gt; PreLocExp loc -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-var">LetLocE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977407"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Var -&gt; PreLocExp Var
forall loc. Int -&gt; loc -&gt; PreLocExp loc
</span><a href="Gibbon.L2.Syntax.html#AfterConstantLE"><span class="hs-identifier hs-var">AfterConstantLE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977409"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977414"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977413"><span class="hs-identifier hs-var">loc3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Exp2 -&gt; E2Ext Var (UrTy Var)) -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-144"></span><span>                        </span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; (Var, Int) -&gt; Map Var (Var, Int) -&gt; Map Var (Var, Int)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977407"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977413"><span class="hs-identifier hs-var">loc3</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977409"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977414"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977411"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-145"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">LetLocE</span></a></span><span> </span><span id="local-6989586621680977416"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977416"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680977417"><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977417"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621680977418"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977418"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; PreLocExp Var -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. Var -&gt; PreLocExp loc -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-var">LetLocE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977416"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977417"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977418"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-type">LetAvail</span></a></span><span> </span><span id="local-6989586621680977420"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977420"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621680977421"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977421"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. [Var] -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-var">LetAvail</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977420"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var (Var, Int) -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977345"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var (Var, Int)
</span><a href="#local-6989586621680977350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977421"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>            </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977395"><span class="hs-identifier hs-var">ext</span></a></span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><span class="annottext">Exp2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977351"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-comment">-- drop dead bindings</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="#local-6989586621680977344"><span class="hs-identifier hs-type">go2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621680977344"><span class="annot"><span class="annottext">go2 :: Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var hs-var">go2</span></a></span></span><span> </span><span id="local-6989586621680977422"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977422"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977422"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-type">AppE</span></a></span><span> </span><span id="local-6989586621680977423"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977423"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680977424"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977424"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680977425"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977425"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-var">AppE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977423"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977424"><span class="hs-identifier hs-var">locs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977425"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span id="local-6989586621680977426"><span class="annot"><span class="annottext">Prim (UrTy Var)
</span><a href="#local-6989586621680977426"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680977427"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977427"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Prim (UrTy Var) -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Prim dec -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-var">PrimAppE</span></a></span><span> </span><span class="annot"><span class="annottext">Prim (UrTy Var)
</span><a href="#local-6989586621680977426"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977427"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977428"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977428"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977429"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977429"><span class="hs-identifier hs-var">locs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977430"><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977430"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977431"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977431"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680977432"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977432"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Var, [Var], UrTy Var, Exp2) -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
(Var, [loc], dec, PreExp ext loc dec)
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-var">LetE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977428"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977429"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977430"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977431"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977432"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-type">IfE</span></a></span><span> </span><span id="local-6989586621680977433"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977433"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680977434"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977434"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680977435"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977435"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2 -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-var">IfE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977433"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977434"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977435"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-type">MkProdE</span></a></span><span> </span><span id="local-6989586621680977436"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977436"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
[PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-var">MkProdE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977436"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-type">ProjE</span></a></span><span> </span><span id="local-6989586621680977437"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977437"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680977438"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977438"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Int -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-var">ProjE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977437"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977438"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span id="local-6989586621680977439"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977439"><span class="hs-identifier hs-var">scrt</span></a></span></span><span> </span><span id="local-6989586621680977440"><span class="annot"><span class="annottext">[([Char], [(Var, Var)], Exp2)]
</span><a href="#local-6989586621680977440"><span class="hs-identifier hs-var">brs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; [([Char], [(Var, Var)], Exp2)] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; [([Char], [(Var, loc)], PreExp ext loc dec)]
-&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-var">CaseE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977439"><span class="hs-identifier hs-var">scrt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(([Char], [(Var, Var)], Exp2) -&gt; ([Char], [(Var, Var)], Exp2))
-&gt; [([Char], [(Var, Var)], Exp2)] -&gt; [([Char], [(Var, Var)], Exp2)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680977441"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977441"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977442"><span class="annot"><span class="annottext">[(Var, Var)]
</span><a href="#local-6989586621680977442"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977443"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977443"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977441"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(Var, Var)]
</span><a href="#local-6989586621680977442"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977443"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[([Char], [(Var, Var)], Exp2)]
</span><a href="#local-6989586621680977440"><span class="hs-identifier hs-var">brs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-type">DataConE</span></a></span><span> </span><span id="local-6989586621680977444"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977444"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680977445"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977445"><span class="hs-identifier hs-var">dcon</span></a></span></span><span> </span><span id="local-6989586621680977446"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977446"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Char] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
loc -&gt; [Char] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-var">DataConE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977444"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977445"><span class="hs-identifier hs-var">dcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977446"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-type">TimeIt</span></a></span><span> </span><span id="local-6989586621680977447"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977447"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680977448"><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977448"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977449"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977449"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; UrTy Var -&gt; Bool -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec -&gt; dec -&gt; Bool -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-var">TimeIt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977447"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977448"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977449"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-163"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-type">WithArenaE</span></a></span><span> </span><span id="local-6989586621680977450"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977450"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680977451"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977451"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-var">WithArenaE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977450"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977451"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-type">SpawnE</span></a></span><span> </span><span id="local-6989586621680977452"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977452"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680977453"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977453"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680977454"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977454"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-var">SpawnE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977452"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977453"><span class="hs-identifier hs-var">locs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977454"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span id="local-6989586621680977455"><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977455"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-166"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977455"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-167"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-type">LetRegionE</span></a></span><span> </span><span id="local-6989586621680977456"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977456"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680977457"><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977457"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621680977458"><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977458"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977459"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977459"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec.
Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-var">LetRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977456"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977457"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977458"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977459"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-type">LetParRegionE</span></a></span><span> </span><span id="local-6989586621680977460"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977460"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680977461"><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977461"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621680977462"><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977462"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977463"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977463"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec.
Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-var">LetParRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977460"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977461"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977462"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977463"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">LetLocE</span></a></span><span> </span><span id="local-6989586621680977464"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977464"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680977465"><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977465"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621680977466"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977466"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-170"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977467"><span class="annot"><span class="annottext">bod' :: Exp2
</span><a href="#local-6989586621680977467"><span class="hs-identifier hs-var hs-var">bod'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977466"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-171"></span><span>                  </span><span id="local-6989586621680977468"><span class="annot"><span class="annottext">free_vars :: Set Var
</span><a href="#local-6989586621680977468"><span class="hs-identifier hs-var hs-var">free_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Set Var
</span><a href="Gibbon.L2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977467"><span class="hs-identifier hs-var">bod'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>              </span><span class="hs-keyword">in</span><span>
</span><span id="line-173"></span><span>                </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977464"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Set Var -&gt; Bool
forall a. Eq a =&gt; a -&gt; Set a -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">Set Var
</span><a href="#local-6989586621680977468"><span class="hs-identifier hs-var">free_vars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; PreLocExp Var -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. Var -&gt; PreLocExp loc -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-var">LetLocE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977464"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977465"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977467"><span class="hs-identifier hs-var">bod'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977467"><span class="hs-identifier hs-var">bod'</span></a></span><span>
</span><span id="line-176"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-type">LetAvail</span></a></span><span> </span><span id="local-6989586621680977471"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977471"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621680977472"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977472"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. [Var] -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-var">LetAvail</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977471"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977344"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977472"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>            </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977455"><span class="hs-identifier hs-var">ext</span></a></span><span>
</span><span id="line-178"></span><span>        </span><span class="annot"><span class="annottext">Exp2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977422"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-comment">-- partially evaluate location arithmetic</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="#local-6989586621680977343"><span class="hs-identifier hs-type">go0</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LocExp"><span class="hs-identifier hs-type">LocExp</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span id="local-6989586621680977343"><span class="annot"><span class="annottext">go0 :: Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var hs-var">go0</span></a></span></span><span> </span><span id="local-6989586621680977474"><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span id="local-6989586621680977475"><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span id="local-6989586621680977476"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977476"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977476"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-184"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-type">AppE</span></a></span><span> </span><span id="local-6989586621680977477"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977477"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680977478"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977478"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680977479"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977479"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-var">AppE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977477"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Var -&gt; Var) -&gt; [Var] -&gt; [Var]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Var -&gt; Var -&gt; Var
forall {k}. Ord k =&gt; Map k k -&gt; k -&gt; k
</span><a href="#local-6989586621680977480"><span class="hs-identifier hs-var">substloc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977478"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977479"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span id="local-6989586621680977481"><span class="annot"><span class="annottext">Prim (UrTy Var)
</span><a href="#local-6989586621680977481"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680977482"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977482"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Prim (UrTy Var) -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Prim dec -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-var">PrimAppE</span></a></span><span> </span><span class="annot"><span class="annottext">Prim (UrTy Var)
</span><a href="#local-6989586621680977481"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977482"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977483"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977483"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977484"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977484"><span class="hs-identifier hs-var">locs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977485"><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977485"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977486"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977486"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680977487"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977487"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Var, [Var], UrTy Var, Exp2) -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
(Var, [loc], dec, PreExp ext loc dec)
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-var">LetE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977483"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977484"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Map Var Var -&gt; UrTy Var -&gt; UrTy Var
</span><a href="Gibbon.L2.Syntax.html#substLoc"><span class="hs-identifier hs-var">substLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977485"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977486"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977487"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-type">IfE</span></a></span><span> </span><span id="local-6989586621680977489"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977489"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680977490"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977490"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680977491"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977491"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; Exp2 -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-var">IfE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977489"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977490"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977491"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-type">MkProdE</span></a></span><span> </span><span id="local-6989586621680977492"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977492"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
[PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-var">MkProdE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977492"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-type">ProjE</span></a></span><span> </span><span id="local-6989586621680977493"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977493"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680977494"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977494"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Int -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-var">ProjE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977493"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977494"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span id="local-6989586621680977495"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977495"><span class="hs-identifier hs-var">scrt</span></a></span></span><span> </span><span id="local-6989586621680977496"><span class="annot"><span class="annottext">[([Char], [(Var, Var)], Exp2)]
</span><a href="#local-6989586621680977496"><span class="hs-identifier hs-var">brs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; [([Char], [(Var, Var)], Exp2)] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; [([Char], [(Var, loc)], PreExp ext loc dec)]
-&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-var">CaseE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977495"><span class="hs-identifier hs-var">scrt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(([Char], [(Var, Var)], Exp2) -&gt; ([Char], [(Var, Var)], Exp2))
-&gt; [([Char], [(Var, Var)], Exp2)] -&gt; [([Char], [(Var, Var)], Exp2)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680977497"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977497"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977498"><span class="annot"><span class="annottext">[(Var, Var)]
</span><a href="#local-6989586621680977498"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977499"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977499"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977497"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(Var, Var)]
</span><a href="#local-6989586621680977498"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977499"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[([Char], [(Var, Var)], Exp2)]
</span><a href="#local-6989586621680977496"><span class="hs-identifier hs-var">brs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-type">DataConE</span></a></span><span> </span><span id="local-6989586621680977500"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977500"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680977501"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977501"><span class="hs-identifier hs-var">dcon</span></a></span></span><span> </span><span id="local-6989586621680977502"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977502"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Char] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
loc -&gt; [Char] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-var">DataConE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Var -&gt; Var -&gt; Var
forall {k}. Ord k =&gt; Map k k -&gt; k -&gt; k
</span><a href="#local-6989586621680977480"><span class="hs-identifier hs-var">substloc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977500"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977501"><span class="hs-identifier hs-var">dcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977502"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-type">TimeIt</span></a></span><span> </span><span id="local-6989586621680977503"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977503"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680977504"><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977504"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977505"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977505"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2 -&gt; UrTy Var -&gt; Bool -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec -&gt; dec -&gt; Bool -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-var">TimeIt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977503"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UrTy Var
</span><a href="#local-6989586621680977504"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977505"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-193"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-type">WithArenaE</span></a></span><span> </span><span id="local-6989586621680977506"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977506"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680977507"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977507"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Exp2 -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-var">WithArenaE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977506"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977507"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-type">SpawnE</span></a></span><span> </span><span id="local-6989586621680977508"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977508"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680977509"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977509"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680977510"><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977510"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; [Var] -&gt; [Exp2] -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
Var -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-var">SpawnE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977508"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Var -&gt; Var) -&gt; [Var] -&gt; [Var]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Var -&gt; Var -&gt; Var
forall {k}. Ord k =&gt; Map k k -&gt; k -&gt; k
</span><a href="#local-6989586621680977480"><span class="hs-identifier hs-var">substloc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977509"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Exp2 -&gt; Exp2) -&gt; [Exp2] -&gt; [Exp2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Exp2]
</span><a href="#local-6989586621680977510"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>        </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span id="local-6989586621680977511"><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977511"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977511"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-type">LetRegionE</span></a></span><span> </span><span id="local-6989586621680977512"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977512"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680977513"><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977513"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621680977514"><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977514"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977515"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977515"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec.
Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-var">LetRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977512"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977513"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977514"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977515"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-type">LetParRegionE</span></a></span><span> </span><span id="local-6989586621680977516"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977516"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680977517"><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977517"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621680977518"><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977518"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680977519"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977519"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec.
Region
-&gt; RegionSize -&gt; Maybe RegionType -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-var">LetParRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680977516"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><a href="#local-6989586621680977517"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><a href="#local-6989586621680977518"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977519"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">LetLocE</span></a></span><span> </span><span id="local-6989586621680977520"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977520"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680977521"><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977521"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621680977522"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977522"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-200"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977523"><span class="annot"><span class="annottext">rhs' :: PreLocExp Var
</span><a href="#local-6989586621680977523"><span class="hs-identifier hs-var hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977521"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-201"></span><span>                           </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AfterConstantLE"><span class="hs-identifier hs-type">AfterConstantLE</span></a></span><span> </span><span id="local-6989586621680977524"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977524"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680977525"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977525"><span class="hs-identifier hs-var">loc2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Var -&gt; PreLocExp Var
forall loc. Int -&gt; loc -&gt; PreLocExp loc
</span><a href="Gibbon.L2.Syntax.html#AfterConstantLE"><span class="hs-identifier hs-var">AfterConstantLE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977524"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Var -&gt; Var -&gt; Var
forall {k}. Ord k =&gt; Map k k -&gt; k -&gt; k
</span><a href="#local-6989586621680977480"><span class="hs-identifier hs-var">substloc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977525"><span class="hs-identifier hs-var">loc2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>                           </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AfterVariableLE"><span class="hs-identifier hs-type">AfterVariableLE</span></a></span><span> </span><span id="local-6989586621680977527"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977527"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680977528"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977528"><span class="hs-identifier hs-var">loc2</span></a></span></span><span> </span><span id="local-6989586621680977529"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977529"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Bool -&gt; PreLocExp Var
forall loc. Var -&gt; loc -&gt; Bool -&gt; PreLocExp loc
</span><a href="Gibbon.L2.Syntax.html#AfterVariableLE"><span class="hs-identifier hs-var">AfterVariableLE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977527"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Var -&gt; Var -&gt; Var
forall {k}. Ord k =&gt; Map k k -&gt; k -&gt; k
</span><a href="#local-6989586621680977480"><span class="hs-identifier hs-var">substloc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977528"><span class="hs-identifier hs-var">loc2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977529"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-203"></span><span>                           </span><span class="annot"><span class="annottext">PreLocExp Var
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977521"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-204"></span><span>              </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PreLocExp Var -&gt; Map (PreLocExp Var) Var -&gt; Maybe Var
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977523"><span class="hs-identifier hs-var">rhs'</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-205"></span><span>                </span><span class="annot"><span class="annottext">Maybe Var
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; PreLocExp Var -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. Var -&gt; PreLocExp loc -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-var">LetLocE</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977520"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977523"><span class="hs-identifier hs-var">rhs'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PreLocExp Var
-&gt; Var -&gt; Map (PreLocExp Var) Var -&gt; Map (PreLocExp Var) Var
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">PreLocExp Var
</span><a href="#local-6989586621680977523"><span class="hs-identifier hs-var">rhs'</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977520"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977522"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>                </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680977530"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977530"><span class="hs-identifier hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Map Var Var -&gt; Map Var Var
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977520"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977530"><span class="hs-identifier hs-var">new</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977522"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-207"></span><span>            </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-type">LetAvail</span></a></span><span> </span><span id="local-6989586621680977531"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977531"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621680977532"><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977532"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; Exp2 -&gt; E2Ext Var (UrTy Var)
forall loc dec. [Var] -&gt; E2 loc dec -&gt; E2Ext loc dec
</span><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-var">LetAvail</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977531"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var -&gt; Map Var Var -&gt; Exp2 -&gt; Exp2
</span><a href="#local-6989586621680977343"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PreLocExp Var) Var
</span><a href="#local-6989586621680977474"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Var
</span><a href="#local-6989586621680977475"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977532"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>            </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var) -&gt; Exp2
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="annot"><span class="annottext">E2Ext Var (UrTy Var)
</span><a href="#local-6989586621680977511"><span class="hs-identifier hs-var">ext</span></a></span><span>
</span><span id="line-209"></span><span>        </span><span class="annot"><span class="annottext">Exp2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp2
</span><a href="#local-6989586621680977476"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>        </span><span id="local-6989586621680977480"><span class="annot"><span class="annottext">substloc :: Map k k -&gt; k -&gt; k
</span><a href="#local-6989586621680977480"><span class="hs-identifier hs-var hs-var">substloc</span></a></span></span><span> </span><span id="local-6989586621680977538"><span class="annot"><span class="annottext">Map k k
</span><a href="#local-6989586621680977538"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680977539"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680977539"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">k -&gt; Map k k -&gt; Maybe k
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680977539"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Map k k
</span><a href="#local-6989586621680977538"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-212"></span><span>                             </span><span class="annot"><span class="annottext">Maybe k
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680977539"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-213"></span><span>                             </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680977540"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680977540"><span class="hs-identifier hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621680977540"><span class="hs-identifier hs-var">new</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><a href="Gibbon.Passes.Simplifier.html#lateInlineTriv"><span class="hs-identifier hs-type">lateInlineTriv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html#Prog"><span class="hs-identifier hs-type">L4.Prog</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html#Prog"><span class="hs-identifier hs-type">L4.Prog</span></a></span><span>
</span><span id="line-218"></span><span id="lateInlineTriv"><span class="annot"><span class="annottext">lateInlineTriv :: Prog -&gt; PassM Prog
</span><a href="Gibbon.Passes.Simplifier.html#lateInlineTriv"><span class="hs-identifier hs-var hs-var">lateInlineTriv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L4.Syntax.html#Prog"><span class="hs-identifier hs-type">L4.Prog</span></a></span><span> </span><span id="local-6989586621680977543"><span class="annot"><span class="annottext">InfoTable
</span><a href="#local-6989586621680977543"><span class="hs-identifier hs-var">info_tbl</span></a></span></span><span> </span><span id="local-6989586621680977544"><span class="annot"><span class="annottext">SymTable
</span><a href="#local-6989586621680977544"><span class="hs-identifier hs-var">sym_tbl</span></a></span></span><span> </span><span id="local-6989586621680977545"><span class="annot"><span class="annottext">[FunDecl]
</span><a href="#local-6989586621680977545"><span class="hs-identifier hs-var">fundefs</span></a></span></span><span> </span><span id="local-6989586621680977546"><span class="annot"><span class="annottext">Maybe MainExp
</span><a href="#local-6989586621680977546"><span class="hs-identifier hs-var">mainExp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977547"><span class="annot"><span class="annottext">fundefs' :: [FunDecl]
</span><a href="#local-6989586621680977547"><span class="hs-identifier hs-var hs-var">fundefs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunDecl -&gt; FunDecl) -&gt; [FunDecl] -&gt; [FunDecl]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">FunDecl -&gt; FunDecl
</span><a href="#local-6989586621680977548"><span class="hs-identifier hs-var">lateInlineTrivFn</span></a></span><span> </span><span class="annot"><span class="annottext">[FunDecl]
</span><a href="#local-6989586621680977545"><span class="hs-identifier hs-var">fundefs</span></a></span><span>
</span><span id="line-220"></span><span>        </span><span id="local-6989586621680977549"><span class="annot"><span class="annottext">mainExp' :: Maybe MainExp
</span><a href="#local-6989586621680977549"><span class="hs-identifier hs-var hs-var">mainExp'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe MainExp
</span><a href="#local-6989586621680977546"><span class="hs-identifier hs-var">mainExp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-221"></span><span>                       </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L4.Syntax.html#PrintExp"><span class="hs-identifier hs-type">L4.PrintExp</span></a></span><span> </span><span id="local-6989586621680977551"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977551"><span class="hs-identifier hs-var">tl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>                           </span><span class="annot"><span class="annottext">MainExp -&gt; Maybe MainExp
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tail -&gt; MainExp
</span><a href="Gibbon.L4.Syntax.html#PrintExp"><span class="hs-identifier hs-var">L4.PrintExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977552"><span class="hs-identifier hs-var">lateInlineTrivExp</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977551"><span class="hs-identifier hs-var">tl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>                       </span><span class="annot"><span class="annottext">Maybe MainExp
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe MainExp
forall a. Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="annot"><span class="annottext">Prog -&gt; PassM Prog
forall a. a -&gt; PassM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog -&gt; PassM Prog) -&gt; Prog -&gt; PassM Prog
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InfoTable -&gt; SymTable -&gt; [FunDecl] -&gt; Maybe MainExp -&gt; Prog
</span><a href="Gibbon.L4.Syntax.html#Prog"><span class="hs-identifier hs-var">L4.Prog</span></a></span><span> </span><span class="annot"><span class="annottext">InfoTable
</span><a href="#local-6989586621680977543"><span class="hs-identifier hs-var">info_tbl</span></a></span><span> </span><span class="annot"><span class="annottext">SymTable
</span><a href="#local-6989586621680977544"><span class="hs-identifier hs-var">sym_tbl</span></a></span><span> </span><span class="annot"><span class="annottext">[FunDecl]
</span><a href="#local-6989586621680977547"><span class="hs-identifier hs-var">fundefs'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe MainExp
</span><a href="#local-6989586621680977549"><span class="hs-identifier hs-var">mainExp'</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>    </span><span class="annot"><a href="#local-6989586621680977548"><span class="hs-identifier hs-type">lateInlineTrivFn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html#FunDecl"><span class="hs-identifier hs-type">L4.FunDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html#FunDecl"><span class="hs-identifier hs-type">L4.FunDecl</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621680977548"><span class="annot"><span class="annottext">lateInlineTrivFn :: FunDecl -&gt; FunDecl
</span><a href="#local-6989586621680977548"><span class="hs-identifier hs-var hs-var">lateInlineTrivFn</span></a></span></span><span> </span><span id="local-6989586621680977553"><span class="annot"><span class="annottext">f :: FunDecl
</span><a href="#local-6989586621680977553"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Gibbon.L4.Syntax.html#FunDecl"><span class="hs-identifier hs-type">L4.FunDecl</span></a></span><span class="hs-special">{</span><span id="local-6989586621680977555"><span class="annot"><span class="annottext">Tail
funBody :: Tail
funBody :: FunDecl -&gt; Tail
</span><a href="#local-6989586621680977555"><span class="hs-identifier hs-var hs-var">L4.funBody</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-228"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680977557"><span class="annot"><span class="annottext">bod' :: Tail
</span><a href="#local-6989586621680977557"><span class="hs-identifier hs-var hs-var">bod'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977552"><span class="hs-identifier hs-var">lateInlineTrivExp</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977555"><span class="hs-identifier hs-var">funBody</span></a></span><span>
</span><span id="line-229"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">FunDecl
</span><a href="#local-6989586621680977553"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">funBody :: Tail
</span><a href="Gibbon.L4.Syntax.html#funBody"><span class="hs-identifier hs-var">L4.funBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977557"><span class="hs-identifier hs-var">bod'</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><a href="#local-6989586621680977552"><span class="hs-identifier hs-type">lateInlineTrivExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html#Triv"><span class="hs-identifier hs-type">L4.Triv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html#Tail"><span class="hs-identifier hs-type">L4.Tail</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L4.Syntax.html#Tail"><span class="hs-identifier hs-type">L4.Tail</span></a></span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621680977552"><span class="annot"><span class="annottext">lateInlineTrivExp :: Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977552"><span class="hs-identifier hs-var hs-var">lateInlineTrivExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-233"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>        </span><span id="local-6989586621680977560"><span class="annot"><span class="annottext">gotriv :: Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var hs-var">gotriv</span></a></span></span><span> </span><span id="local-6989586621680977561"><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977561"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680977562"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977562"><span class="hs-identifier hs-var">trv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977562"><span class="hs-identifier hs-var">trv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-236"></span><span>                </span><span class="annot"><a href="Gibbon.L4.Syntax.html#VarTriv"><span class="hs-identifier hs-type">L4.VarTriv</span></a></span><span> </span><span id="local-6989586621680977564"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977564"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Map Var Triv -&gt; Maybe Triv
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977564"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977561"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-237"></span><span>                                 </span><span class="annot"><span class="annottext">Maybe Triv
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977562"><span class="hs-identifier hs-var">trv</span></a></span><span>
</span><span id="line-238"></span><span>                                 </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680977565"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977565"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977565"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-239"></span><span>                </span><span class="annot"><a href="Gibbon.L4.Syntax.html#ProdTriv"><span class="hs-identifier hs-type">L4.ProdTriv</span></a></span><span> </span><span id="local-6989586621680977567"><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977567"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Triv] -&gt; Triv
</span><a href="Gibbon.L4.Syntax.html#ProdTriv"><span class="hs-identifier hs-var">L4.ProdTriv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Triv -&gt; Triv) -&gt; [Triv] -&gt; [Triv]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977561"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977567"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>                </span><span class="annot"><a href="Gibbon.L4.Syntax.html#ProjTriv"><span class="hs-identifier hs-type">L4.ProjTriv</span></a></span><span> </span><span id="local-6989586621680977569"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977569"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680977570"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977570"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Triv -&gt; Triv
</span><a href="Gibbon.L4.Syntax.html#ProjTriv"><span class="hs-identifier hs-var">L4.ProjTriv</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680977569"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977561"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977570"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>                </span><span class="annot"><span class="annottext">Triv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977562"><span class="hs-identifier hs-var">trv</span></a></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span>        </span><span id="local-6989586621680977578"><span class="annot"><span class="annottext">goalts :: Map Var Triv -&gt; Alts -&gt; Alts
</span><a href="#local-6989586621680977578"><span class="hs-identifier hs-var hs-var">goalts</span></a></span></span><span> </span><span id="local-6989586621680977579"><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977579"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680977580"><span class="annot"><span class="annottext">Alts
</span><a href="#local-6989586621680977580"><span class="hs-identifier hs-var">alts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Alts
</span><a href="#local-6989586621680977580"><span class="hs-identifier hs-var">alts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-245"></span><span>                </span><span class="annot"><a href="Gibbon.L4.Syntax.html#TagAlts"><span class="hs-identifier hs-type">L4.TagAlts</span></a></span><span> </span><span id="local-6989586621680977582"><span class="annot"><span class="annottext">[(Tag, Tail)]
</span><a href="#local-6989586621680977582"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Tag, Tail)] -&gt; Alts
</span><a href="Gibbon.L4.Syntax.html#TagAlts"><span class="hs-identifier hs-var">L4.TagAlts</span></a></span><span> </span><span class="annot"><span class="annottext">([(Tag, Tail)] -&gt; Alts) -&gt; [(Tag, Tail)] -&gt; Alts
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Tag, Tail) -&gt; (Tag, Tail)) -&gt; [(Tag, Tail)] -&gt; [(Tag, Tail)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680977583"><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621680977583"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977584"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977584"><span class="hs-identifier hs-var">tl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621680977583"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977579"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977584"><span class="hs-identifier hs-var">tl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Tag, Tail)]
</span><a href="#local-6989586621680977582"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-246"></span><span>                </span><span class="annot"><a href="Gibbon.L4.Syntax.html#IntAlts"><span class="hs-identifier hs-type">L4.IntAlts</span></a></span><span> </span><span id="local-6989586621680977586"><span class="annot"><span class="annottext">[(Int64, Tail)]
</span><a href="#local-6989586621680977586"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Int64, Tail)] -&gt; Alts
</span><a href="Gibbon.L4.Syntax.html#IntAlts"><span class="hs-identifier hs-var">L4.IntAlts</span></a></span><span> </span><span class="annot"><span class="annottext">([(Int64, Tail)] -&gt; Alts) -&gt; [(Int64, Tail)] -&gt; Alts
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Int64, Tail) -&gt; (Int64, Tail))
-&gt; [(Int64, Tail)] -&gt; [(Int64, Tail)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680977587"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621680977587"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977588"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977588"><span class="hs-identifier hs-var">tl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621680977587"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977579"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977588"><span class="hs-identifier hs-var">tl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Int64, Tail)]
</span><a href="#local-6989586621680977586"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-247"></span><span>        </span><span id="local-6989586621680977558"><span class="annot"><span class="annottext">go :: Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621680977589"><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680977590"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977590"><span class="hs-identifier hs-var">tl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-248"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977590"><span class="hs-identifier hs-var">tl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-249"></span><span>                   </span><span class="annot"><span class="annottext">Tail
</span><a href="Gibbon.L4.Syntax.html#EndOfMain"><span class="hs-identifier hs-var">L4.EndOfMain</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="Gibbon.L4.Syntax.html#EndOfMain"><span class="hs-identifier hs-var">L4.EndOfMain</span></a></span><span>
</span><span id="line-250"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#RetValsT"><span class="hs-identifier hs-type">L4.RetValsT</span></a></span><span> </span><span id="local-6989586621680977593"><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977593"><span class="hs-identifier hs-var">trvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>                       </span><span class="annot"><span class="annottext">[Triv] -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#RetValsT"><span class="hs-identifier hs-var">L4.RetValsT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Triv -&gt; Triv) -&gt; [Triv] -&gt; [Triv]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977593"><span class="hs-identifier hs-var">trvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#AssnValsT"><span class="hs-identifier hs-type">L4.AssnValsT</span></a></span><span> </span><span id="local-6989586621680977595"><span class="annot"><span class="annottext">[(Var, Ty, Triv)]
</span><a href="#local-6989586621680977595"><span class="hs-identifier hs-var">upd</span></a></span></span><span> </span><span id="local-6989586621680977596"><span class="annot"><span class="annottext">Maybe Tail
</span><a href="#local-6989586621680977596"><span class="hs-identifier hs-var">mb_bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>                       </span><span class="annot"><span class="annottext">[(Var, Ty, Triv)] -&gt; Maybe Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#AssnValsT"><span class="hs-identifier hs-var">L4.AssnValsT</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, Ty, Triv)]
</span><a href="#local-6989586621680977595"><span class="hs-identifier hs-var">upd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Tail -&gt; Tail) -&gt; Maybe Tail -&gt; Maybe Tail
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Tail
</span><a href="#local-6989586621680977596"><span class="hs-identifier hs-var">mb_bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetCallT"><span class="hs-identifier hs-type">L4.LetCallT</span></a></span><span> </span><span id="local-6989586621680977598"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977598"><span class="hs-identifier hs-var">async</span></a></span></span><span> </span><span id="local-6989586621680977599"><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977599"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621680977600"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977600"><span class="hs-identifier hs-var">rator</span></a></span></span><span> </span><span id="local-6989586621680977601"><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977601"><span class="hs-identifier hs-var">rands</span></a></span></span><span> </span><span id="local-6989586621680977602"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977602"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-255"></span><span>                       </span><span class="annot"><span class="annottext">Bool -&gt; [(Var, Ty)] -&gt; Var -&gt; [Triv] -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetCallT"><span class="hs-identifier hs-var">L4.LetCallT</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977598"><span class="hs-identifier hs-var">async</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977599"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977600"><span class="hs-identifier hs-var">rator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Triv -&gt; Triv) -&gt; [Triv] -&gt; [Triv]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977601"><span class="hs-identifier hs-var">rands</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977602"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetPrimCallT"><span class="hs-identifier hs-type">L4.LetPrimCallT</span></a></span><span> </span><span id="local-6989586621680977604"><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977604"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621680977605"><span class="annot"><span class="annottext">Prim
</span><a href="#local-6989586621680977605"><span class="hs-keyword hs-var">prim</span></a></span></span><span> </span><span id="local-6989586621680977606"><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977606"><span class="hs-identifier hs-var">rands</span></a></span></span><span> </span><span id="local-6989586621680977607"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977607"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-257"></span><span>                       </span><span class="annot"><span class="annottext">[(Var, Ty)] -&gt; Prim -&gt; [Triv] -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetPrimCallT"><span class="hs-identifier hs-var">L4.LetPrimCallT</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977604"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">Prim
</span><a href="#local-6989586621680977605"><span class="hs-keyword hs-var">prim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Triv -&gt; Triv) -&gt; [Triv] -&gt; [Triv]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977606"><span class="hs-identifier hs-var">rands</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977607"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetTrivT"><span class="hs-identifier hs-type">L4.LetTrivT</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977609"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977610"><span class="annot"><span class="annottext">Ty
</span><a href="#local-6989586621680977610"><span class="hs-identifier hs-var">_ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977611"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977611"><span class="hs-identifier hs-var">trv</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680977612"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977612"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-259"></span><span>                       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977611"><span class="hs-identifier hs-var">trv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-260"></span><span>                           </span><span class="annot"><a href="Gibbon.L4.Syntax.html#VarTriv"><span class="hs-identifier hs-type">L4.VarTriv</span></a></span><span> </span><span id="local-6989586621680977613"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977613"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Map Var Triv -&gt; Maybe Triv
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977613"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-261"></span><span>                                            </span><span class="annot"><span class="annottext">Maybe Triv
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Triv -&gt; Map Var Triv -&gt; Map Var Triv
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977611"><span class="hs-identifier hs-var">trv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977612"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-262"></span><span>                                            </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680977614"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977614"><span class="hs-identifier hs-var">trv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Triv -&gt; Map Var Triv -&gt; Map Var Triv
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977614"><span class="hs-identifier hs-var">trv'</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977612"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-263"></span><span>                           </span><span class="annot"><span class="annottext">Triv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Triv -&gt; Map Var Triv -&gt; Map Var Triv
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">M.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977609"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977611"><span class="hs-identifier hs-var">trv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977612"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-264"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetIfT"><span class="hs-identifier hs-type">L4.LetIfT</span></a></span><span> </span><span id="local-6989586621680977616"><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977616"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680977617"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977617"><span class="hs-identifier hs-var">trv</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977618"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977618"><span class="hs-identifier hs-var">tl1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977619"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977619"><span class="hs-identifier hs-var">tl2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680977620"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977620"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-265"></span><span>                       </span><span class="annot"><span class="annottext">[(Var, Ty)] -&gt; (Triv, Tail, Tail) -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetIfT"><span class="hs-identifier hs-var">L4.LetIfT</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977616"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977617"><span class="hs-identifier hs-var">trv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977618"><span class="hs-identifier hs-var">tl1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977619"><span class="hs-identifier hs-var">tl2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977620"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetUnpackT"><span class="hs-identifier hs-type">L4.LetUnpackT</span></a></span><span> </span><span id="local-6989586621680977622"><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977622"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621680977623"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977623"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span id="local-6989586621680977624"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977624"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-267"></span><span>                       </span><span class="annot"><span class="annottext">[(Var, Ty)] -&gt; Var -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetUnpackT"><span class="hs-identifier hs-var">L4.LetUnpackT</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977622"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977623"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977624"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetAllocT"><span class="hs-identifier hs-type">L4.LetAllocT</span></a></span><span> </span><span id="local-6989586621680977626"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977626"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621680977627"><span class="annot"><span class="annottext">[(Ty, Triv)]
</span><a href="#local-6989586621680977627"><span class="hs-identifier hs-var">vals</span></a></span></span><span> </span><span id="local-6989586621680977628"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977628"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-269"></span><span>                       </span><span class="annot"><span class="annottext">Var -&gt; [(Ty, Triv)] -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetAllocT"><span class="hs-identifier hs-var">L4.LetAllocT</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977626"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Ty, Triv) -&gt; (Ty, Triv)) -&gt; [(Ty, Triv)] -&gt; [(Ty, Triv)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680977629"><span class="annot"><span class="annottext">Ty
</span><a href="#local-6989586621680977629"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680977630"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977630"><span class="hs-identifier hs-var">trv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty
</span><a href="#local-6989586621680977629"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977630"><span class="hs-identifier hs-var">trv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Ty, Triv)]
</span><a href="#local-6989586621680977627"><span class="hs-identifier hs-var">vals</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977628"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetAvailT"><span class="hs-identifier hs-type">L4.LetAvailT</span></a></span><span> </span><span id="local-6989586621680977632"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977632"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621680977633"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977633"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-271"></span><span>                       </span><span class="annot"><span class="annottext">[Var] -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetAvailT"><span class="hs-identifier hs-var">L4.LetAvailT</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680977632"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977633"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#IfT"><span class="hs-identifier hs-type">L4.IfT</span></a></span><span> </span><span id="local-6989586621680977635"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977635"><span class="hs-identifier hs-var">tst</span></a></span></span><span> </span><span id="local-6989586621680977636"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977636"><span class="hs-identifier hs-var">thn</span></a></span></span><span> </span><span id="local-6989586621680977637"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977637"><span class="hs-identifier hs-var">els</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-273"></span><span>                       </span><span class="annot"><span class="annottext">Triv -&gt; Tail -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#IfT"><span class="hs-identifier hs-var">L4.IfT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977635"><span class="hs-identifier hs-var">tst</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977636"><span class="hs-identifier hs-var">thn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977637"><span class="hs-identifier hs-var">els</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#ErrT"><span class="hs-identifier hs-type">L4.ErrT</span></a></span><span> </span><span id="local-6989586621680977639"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977639"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#ErrT"><span class="hs-identifier hs-var">L4.ErrT</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621680977639"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-275"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetTimedT"><span class="hs-identifier hs-type">L4.LetTimedT</span></a></span><span> </span><span id="local-6989586621680977641"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977641"><span class="hs-identifier hs-var">isiter</span></a></span></span><span> </span><span id="local-6989586621680977642"><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977642"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621680977643"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977643"><span class="hs-identifier hs-var">timed</span></a></span></span><span> </span><span id="local-6989586621680977644"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977644"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-276"></span><span>                       </span><span class="annot"><span class="annottext">Bool -&gt; [(Var, Ty)] -&gt; Tail -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetTimedT"><span class="hs-identifier hs-var">L4.LetTimedT</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680977641"><span class="hs-identifier hs-var">isiter</span></a></span><span> </span><span class="annot"><span class="annottext">[(Var, Ty)]
</span><a href="#local-6989586621680977642"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977643"><span class="hs-identifier hs-var">timed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977644"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#Switch"><span class="hs-identifier hs-type">L4.Switch</span></a></span><span> </span><span id="local-6989586621680977646"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977646"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span id="local-6989586621680977647"><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977647"><span class="hs-identifier hs-var">trv</span></a></span></span><span> </span><span id="local-6989586621680977648"><span class="annot"><span class="annottext">Alts
</span><a href="#local-6989586621680977648"><span class="hs-identifier hs-var">alts</span></a></span></span><span> </span><span id="local-6989586621680977649"><span class="annot"><span class="annottext">Maybe Tail
</span><a href="#local-6989586621680977649"><span class="hs-identifier hs-var">mb_tl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-278"></span><span>                       </span><span class="annot"><span class="annottext">Var -&gt; Triv -&gt; Alts -&gt; Maybe Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#Switch"><span class="hs-identifier hs-var">L4.Switch</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977646"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">Triv
</span><a href="#local-6989586621680977647"><span class="hs-identifier hs-var">trv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Alts -&gt; Alts
</span><a href="#local-6989586621680977578"><span class="hs-identifier hs-var">goalts</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Alts
</span><a href="#local-6989586621680977648"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Tail -&gt; Tail) -&gt; Maybe Tail -&gt; Maybe Tail
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Tail
</span><a href="#local-6989586621680977649"><span class="hs-identifier hs-var">mb_tl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#TailCall"><span class="hs-identifier hs-type">L4.TailCall</span></a></span><span> </span><span id="local-6989586621680977651"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977651"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621680977652"><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977652"><span class="hs-identifier hs-var">trvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-280"></span><span>                       </span><span class="annot"><span class="annottext">Var -&gt; [Triv] -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#TailCall"><span class="hs-identifier hs-var">L4.TailCall</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977651"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Triv -&gt; Triv) -&gt; [Triv] -&gt; [Triv]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Triv -&gt; Triv
</span><a href="#local-6989586621680977560"><span class="hs-identifier hs-var">gotriv</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Triv]
</span><a href="#local-6989586621680977652"><span class="hs-identifier hs-var">trvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#Goto"><span class="hs-identifier hs-type">L4.Goto</span></a></span><span> </span><span id="local-6989586621680977654"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977654"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#Goto"><span class="hs-identifier hs-var">L4.Goto</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977654"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-282"></span><span>                   </span><span class="annot"><a href="Gibbon.L4.Syntax.html#LetArenaT"><span class="hs-identifier hs-type">L4.LetArenaT</span></a></span><span> </span><span id="local-6989586621680977656"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977656"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621680977657"><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977657"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>                       </span><span class="annot"><span class="annottext">Var -&gt; Tail -&gt; Tail
</span><a href="Gibbon.L4.Syntax.html#LetArenaT"><span class="hs-identifier hs-var">L4.LetArenaT</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680977656"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Var Triv -&gt; Tail -&gt; Tail
</span><a href="#local-6989586621680977558"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map Var Triv
</span><a href="#local-6989586621680977589"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Tail
</span><a href="#local-6989586621680977657"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span></pre></body></html>