<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-name-shadowing #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-orphans #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# OPTIONS_GHC -fdefer-typed-holes #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="annot"><span class="hs-comment">-- | An intermediate language with an effect system that captures traversals.</span></span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Gibbon.NewL2.Syntax</span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Extended language L2 with location types.</span></span><span>
</span><span id="line-13"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#E2Ext"><span class="hs-identifier">Old.E2Ext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Prog2"><span class="hs-identifier">Prog2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#DDefs2"><span class="hs-identifier">DDefs2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#DDef2"><span class="hs-identifier">DDef2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#FunDef2"><span class="hs-identifier">FunDef2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#FunDefs2"><span class="hs-identifier">FunDefs2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier">Exp2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier">Ty2</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Effect"><span class="hs-identifier">Old.Effect</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#ArrowTy2"><span class="hs-identifier">Old.ArrowTy2</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LocRet"><span class="hs-identifier">Old.LocRet</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier">LocArg</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocExp"><span class="hs-identifier">LocExp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#PreLocExp"><span class="hs-identifier">Old.PreLocExp</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Regions and locations</span></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier">LocVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Region"><span class="hs-identifier">Old.Region</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Modality"><span class="hs-identifier">Old.Modality</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LRM"><span class="hs-identifier">Old.LRM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier">LREM</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Multiplicity"><span class="hs-identifier">Old.Multiplicity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#RegionSize"><span class="hs-identifier">Old.RegionSize</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#RegionType"><span class="hs-identifier">Old.RegionType</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier">Old.regionToVar</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Operations on types</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#allLocVars"><span class="hs-identifier">Old.allLocVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#inLocVars"><span class="hs-identifier">Old.inLocVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#outLocVars"><span class="hs-identifier">Old.outLocVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#outRegVars"><span class="hs-identifier">Old.outRegVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#inRegVars"><span class="hs-identifier">Old.inRegVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#allRegVars"><span class="hs-identifier">Old.allRegVars</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier">substLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#substLocs"><span class="hs-identifier">substLocs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#substEff"><span class="hs-identifier">Old.substEff</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#substEffs"><span class="hs-identifier">Old.substEffs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#extendPatternMatchEnv"><span class="hs-identifier">extendPatternMatchEnv</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#locsInTy"><span class="hs-identifier">locsInTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#dummyTyLocs"><span class="hs-identifier">Old.dummyTyLocs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier">allFreeVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#freeLocVars"><span class="hs-identifier">freeLocVars</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier">toLocVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#fromLRM"><span class="hs-identifier">fromLRM</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Other helpers</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#revertToL1"><span class="hs-identifier">revertToL1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#occurs"><span class="hs-identifier">Old.occurs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#mapPacked"><span class="hs-identifier">Old.mapPacked</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#constPacked"><span class="hs-identifier">Old.constPacked</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#depList"><span class="hs-identifier">depList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#changeAppToSpawn"><span class="hs-identifier">Old.changeAppToSpawn</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#toEndFromTaggedV"><span class="hs-identifier">toEndFromTaggedV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#toTagV"><span class="hs-identifier">toTagV</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Gibbon.Language.html"><span class="hs-identifier">Gibbon.Language</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html"><span class="hs-identifier">Control.DeepSeq</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.html"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Stack.html"><span class="hs-identifier">GHC.Stack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/artem/.cabal/store/ghc-9.4.5/GenericPretty-1.2.2-7277c36a966d41cd8e1371a7ee4c855b29a76e94dfe1d95510f68242766a5b82/share/doc/html/src/Text.PrettyPrint.GenericPretty.html"><span class="hs-identifier">Text.PrettyPrint.GenericPretty</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Gibbon.Common.html"><span class="hs-identifier">Gibbon.Common</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Gibbon.Language.html"><span class="hs-identifier">Gibbon.Language</span></a></span><span>
</span><span id="line-44"></span><span class="hs-comment">-- import           Text.PrettyPrint.HughesPJ</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Gibbon.L1.Syntax.html"><span class="hs-identifier">Gibbon.L1.Syntax</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L1.Syntax.html#AddFixed"><span class="hs-identifier">AddFixed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#StartOfPkdCursor"><span class="hs-identifier">StartOfPkdCursor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html"><span class="hs-identifier">Gibbon.L1.Syntax</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L1</span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html"><span class="hs-identifier">Gibbon.L2.Syntax</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Old</span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">type</span><span> </span><span id="Prog2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Prog2"><span class="hs-identifier hs-var">Prog2</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">type</span><span> </span><span id="DDef2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#DDef2"><span class="hs-identifier hs-var">DDef2</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DDef"><span class="hs-identifier hs-type">DDef</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">type</span><span> </span><span id="DDefs2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#DDefs2"><span class="hs-identifier hs-var">DDefs2</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DDefs"><span class="hs-identifier hs-type">DDefs</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">type</span><span> </span><span id="FunDef2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#FunDef2"><span class="hs-identifier hs-var">FunDef2</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDef"><span class="hs-identifier hs-type">FunDef</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">type</span><span> </span><span id="FunDefs2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#FunDefs2"><span class="hs-identifier hs-var">FunDefs2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDefs"><span class="hs-identifier hs-type">FunDefs</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="annot"><span class="hs-comment">-- | Function types know about locations and traversal effects.</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunctionTy"><span class="hs-identifier hs-type">FunctionTy</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="ArrowTy"><span class="annot"><a href="Gibbon.Language.Syntax.html#ArrowTy"><span class="hs-identifier hs-var">ArrowTy</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#ArrowTy2"><span class="hs-identifier hs-type">Old.ArrowTy2</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span id="local-6989586621680937151"><span class="annot"><span class="annottext">inTys :: ArrowTy Ty2 -&gt; [Ty2]
</span><a href="#local-6989586621680937151"><span class="hs-identifier hs-var hs-var hs-var hs-var">inTys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArrowTy Ty2 -&gt; [Ty2]
ArrowTy2 Ty2 -&gt; [Ty2]
forall ty2. ArrowTy2 ty2 -&gt; [ty2]
</span><a href="Gibbon.L2.Syntax.html#arrIns"><span class="hs-identifier hs-var">Old.arrIns</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span id="local-6989586621680937154"><span class="annot"><span class="annottext">outTy :: ArrowTy Ty2 -&gt; Ty2
</span><a href="#local-6989586621680937154"><span class="hs-identifier hs-var hs-var hs-var hs-var">outTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArrowTy Ty2 -&gt; Ty2
ArrowTy2 Ty2 -&gt; Ty2
forall ty2. ArrowTy2 ty2 -&gt; ty2
</span><a href="Gibbon.L2.Syntax.html#arrOut"><span class="hs-identifier hs-var">Old.arrOut</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-comment">-- | Extended expressions, L2.</span><span>
</span><span id="line-65"></span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span class="hs-comment">--   By adding a `LocVar` decoration, all data constructors,</span><span>
</span><span id="line-67"></span><span class="hs-comment">--   applications, and bindings gain a location annotation.</span><span>
</span><span id="line-68"></span><span class="hs-keyword">type</span><span> </span><span id="Exp2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-var">Exp2</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PreExp"><span class="hs-identifier hs-type">PreExp</span></a></span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#E2Ext"><span class="hs-identifier hs-type">Old.E2Ext</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">type</span><span> </span><span id="LocExp"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocExp"><span class="hs-identifier hs-var">LocExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#PreLocExp"><span class="hs-identifier hs-type">Old.PreLocExp</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-comment">-- We need a newtype here to avoid overlapping type family instance for FunctionTy</span><span>
</span><span id="line-72"></span><span class="annot"><span class="hs-comment">-- | L1 Types extended with abstract Locations.</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">newtype</span><span> </span><span id="Ty2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-var">Ty2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MkTy2"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unTy2"><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var hs-var">unTy2</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#UrTy"><span class="hs-identifier hs-type">UrTy</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680937160"><span id="local-6989586621680937164"><span id="local-6989586621680937167"><span id="local-6989586621680937178"><span class="annot"><span class="annottext">ReadPrec [Ty2]
ReadPrec Ty2
Int -&gt; ReadS Ty2
ReadS [Ty2]
(Int -&gt; ReadS Ty2)
-&gt; ReadS [Ty2] -&gt; ReadPrec Ty2 -&gt; ReadPrec [Ty2] -&gt; Read Ty2
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS Ty2
readsPrec :: Int -&gt; ReadS Ty2
$creadList :: ReadS [Ty2]
readList :: ReadS [Ty2]
$creadPrec :: ReadPrec Ty2
readPrec :: ReadPrec Ty2
$creadListPrec :: ReadPrec [Ty2]
readListPrec :: ReadPrec [Ty2]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Read.html#Read"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937183"><span id="local-6989586621680937190"><span id="local-6989586621680937193"><span class="annot"><span class="annottext">Int -&gt; Ty2 -&gt; ShowS
[Ty2] -&gt; ShowS
Ty2 -&gt; String
(Int -&gt; Ty2 -&gt; ShowS)
-&gt; (Ty2 -&gt; String) -&gt; ([Ty2] -&gt; ShowS) -&gt; Show Ty2
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Ty2 -&gt; ShowS
showsPrec :: Int -&gt; Ty2 -&gt; ShowS
$cshow :: Ty2 -&gt; String
show :: Ty2 -&gt; String
$cshowList :: [Ty2] -&gt; ShowS
showList :: [Ty2] -&gt; ShowS
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937198"><span id="local-6989586621680937204"><span class="annot"><span class="annottext">Ty2 -&gt; Ty2 -&gt; Bool
(Ty2 -&gt; Ty2 -&gt; Bool) -&gt; (Ty2 -&gt; Ty2 -&gt; Bool) -&gt; Eq Ty2
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Ty2 -&gt; Ty2 -&gt; Bool
== :: Ty2 -&gt; Ty2 -&gt; Bool
$c/= :: Ty2 -&gt; Ty2 -&gt; Bool
/= :: Ty2 -&gt; Ty2 -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937214"><span id="local-6989586621680937220"><span id="local-6989586621680937225"><span id="local-6989586621680937230"><span id="local-6989586621680937235"><span id="local-6989586621680937240"><span id="local-6989586621680937245"><span class="annot"><span class="annottext">Eq Ty2
Eq Ty2
-&gt; (Ty2 -&gt; Ty2 -&gt; Ordering)
-&gt; (Ty2 -&gt; Ty2 -&gt; Bool)
-&gt; (Ty2 -&gt; Ty2 -&gt; Bool)
-&gt; (Ty2 -&gt; Ty2 -&gt; Bool)
-&gt; (Ty2 -&gt; Ty2 -&gt; Bool)
-&gt; (Ty2 -&gt; Ty2 -&gt; Ty2)
-&gt; (Ty2 -&gt; Ty2 -&gt; Ty2)
-&gt; Ord Ty2
Ty2 -&gt; Ty2 -&gt; Bool
Ty2 -&gt; Ty2 -&gt; Ordering
Ty2 -&gt; Ty2 -&gt; Ty2
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Ty2 -&gt; Ty2 -&gt; Ordering
compare :: Ty2 -&gt; Ty2 -&gt; Ordering
$c&lt; :: Ty2 -&gt; Ty2 -&gt; Bool
&lt; :: Ty2 -&gt; Ty2 -&gt; Bool
$c&lt;= :: Ty2 -&gt; Ty2 -&gt; Bool
&lt;= :: Ty2 -&gt; Ty2 -&gt; Bool
$c&gt; :: Ty2 -&gt; Ty2 -&gt; Bool
&gt; :: Ty2 -&gt; Ty2 -&gt; Bool
$c&gt;= :: Ty2 -&gt; Ty2 -&gt; Bool
&gt;= :: Ty2 -&gt; Ty2 -&gt; Bool
$cmax :: Ty2 -&gt; Ty2 -&gt; Ty2
max :: Ty2 -&gt; Ty2 -&gt; Ty2
$cmin :: Ty2 -&gt; Ty2 -&gt; Ty2
min :: Ty2 -&gt; Ty2 -&gt; Ty2
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937253"><span id="local-6989586621680937255"><span class="annot"><span class="annottext">(forall x. Ty2 -&gt; Rep Ty2 x)
-&gt; (forall x. Rep Ty2 x -&gt; Ty2) -&gt; Generic Ty2
forall x. Rep Ty2 x -&gt; Ty2
forall x. Ty2 -&gt; Rep Ty2 x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. Ty2 -&gt; Rep Ty2 x
from :: forall x. Ty2 -&gt; Rep Ty2 x
$cto :: forall x. Rep Ty2 x -&gt; Ty2
to :: forall x. Rep Ty2 x -&gt; Ty2
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680937259"><span id="local-6989586621680937266"><span id="local-6989586621680937272"><span class="annot"><a href="file:///home/artem/.cabal/store/ghc-9.4.5/GenericPretty-1.2.2-7277c36a966d41cd8e1371a7ee4c855b29a76e94dfe1d95510f68242766a5b82/share/doc/html/src/Text.PrettyPrint.GenericPretty.html#Out"><span class="hs-identifier hs-type">Out</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span></span></span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680937332"><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">data</span><span> </span><span id="LREM"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-var">LREM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LREM"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-var">LREM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="lremLoc"><span class="annot"><span class="annottext">LREM -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#lremLoc"><span class="hs-identifier hs-var hs-var">lremLoc</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span>
</span><span id="line-82"></span><span>                 </span><span class="hs-special">,</span><span> </span><span id="lremReg"><span class="annot"><span class="annottext">LREM -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#lremReg"><span class="hs-identifier hs-var hs-var">lremReg</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Common.html#RegVar"><span class="hs-identifier hs-type">RegVar</span></a></span><span>
</span><span id="line-83"></span><span>                 </span><span class="hs-special">,</span><span> </span><span id="lremEndReg"><span class="annot"><span class="annottext">LREM -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#lremEndReg"><span class="hs-identifier hs-var hs-var">lremEndReg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Common.html#RegVar"><span class="hs-identifier hs-type">RegVar</span></a></span><span>
</span><span id="line-84"></span><span>                 </span><span class="hs-special">,</span><span> </span><span id="lremMode"><span class="annot"><span class="annottext">LREM -&gt; Modality
</span><a href="Gibbon.NewL2.Syntax.html#lremMode"><span class="hs-identifier hs-var hs-var">lremMode</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Modality"><span class="hs-identifier hs-type">Old.Modality</span></a></span><span>
</span><span id="line-85"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680937355"><span id="local-6989586621680937359"><span id="local-6989586621680937362"><span id="local-6989586621680937380"><span class="annot"><span class="annottext">ReadPrec [LREM]
ReadPrec LREM
Int -&gt; ReadS LREM
ReadS [LREM]
(Int -&gt; ReadS LREM)
-&gt; ReadS [LREM] -&gt; ReadPrec LREM -&gt; ReadPrec [LREM] -&gt; Read LREM
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS LREM
readsPrec :: Int -&gt; ReadS LREM
$creadList :: ReadS [LREM]
readList :: ReadS [LREM]
$creadPrec :: ReadPrec LREM
readPrec :: ReadPrec LREM
$creadListPrec :: ReadPrec [LREM]
readListPrec :: ReadPrec [LREM]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Read.html#Read"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></a></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621680937383"><span id="local-6989586621680937391"><span id="local-6989586621680937395"><span class="annot"><span class="annottext">Int -&gt; LREM -&gt; ShowS
[LREM] -&gt; ShowS
LREM -&gt; String
(Int -&gt; LREM -&gt; ShowS)
-&gt; (LREM -&gt; String) -&gt; ([LREM] -&gt; ShowS) -&gt; Show LREM
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; LREM -&gt; ShowS
showsPrec :: Int -&gt; LREM -&gt; ShowS
$cshow :: LREM -&gt; String
show :: LREM -&gt; String
$cshowList :: [LREM] -&gt; ShowS
showList :: [LREM] -&gt; ShowS
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621680937398"><span id="local-6989586621680937405"><span class="annot"><span class="annottext">LREM -&gt; LREM -&gt; Bool
(LREM -&gt; LREM -&gt; Bool) -&gt; (LREM -&gt; LREM -&gt; Bool) -&gt; Eq LREM
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LREM -&gt; LREM -&gt; Bool
== :: LREM -&gt; LREM -&gt; Bool
$c/= :: LREM -&gt; LREM -&gt; Bool
/= :: LREM -&gt; LREM -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span id="local-6989586621680937411"><span id="local-6989586621680937418"><span id="local-6989586621680937424"><span id="local-6989586621680937428"><span id="local-6989586621680937431"><span id="local-6989586621680937434"><span id="local-6989586621680937437"><span class="annot"><span class="annottext">Eq LREM
Eq LREM
-&gt; (LREM -&gt; LREM -&gt; Ordering)
-&gt; (LREM -&gt; LREM -&gt; Bool)
-&gt; (LREM -&gt; LREM -&gt; Bool)
-&gt; (LREM -&gt; LREM -&gt; Bool)
-&gt; (LREM -&gt; LREM -&gt; Bool)
-&gt; (LREM -&gt; LREM -&gt; LREM)
-&gt; (LREM -&gt; LREM -&gt; LREM)
-&gt; Ord LREM
LREM -&gt; LREM -&gt; Bool
LREM -&gt; LREM -&gt; Ordering
LREM -&gt; LREM -&gt; LREM
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: LREM -&gt; LREM -&gt; Ordering
compare :: LREM -&gt; LREM -&gt; Ordering
$c&lt; :: LREM -&gt; LREM -&gt; Bool
&lt; :: LREM -&gt; LREM -&gt; Bool
$c&lt;= :: LREM -&gt; LREM -&gt; Bool
&lt;= :: LREM -&gt; LREM -&gt; Bool
$c&gt; :: LREM -&gt; LREM -&gt; Bool
&gt; :: LREM -&gt; LREM -&gt; Bool
$c&gt;= :: LREM -&gt; LREM -&gt; Bool
&gt;= :: LREM -&gt; LREM -&gt; Bool
$cmax :: LREM -&gt; LREM -&gt; LREM
max :: LREM -&gt; LREM -&gt; LREM
$cmin :: LREM -&gt; LREM -&gt; LREM
min :: LREM -&gt; LREM -&gt; LREM
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621680937440"><span id="local-6989586621680937442"><span class="annot"><span class="annottext">(forall x. LREM -&gt; Rep LREM x)
-&gt; (forall x. Rep LREM x -&gt; LREM) -&gt; Generic LREM
forall x. Rep LREM x -&gt; LREM
forall x. LREM -&gt; Rep LREM x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. LREM -&gt; Rep LREM x
from :: forall x. LREM -&gt; Rep LREM x
$cto :: forall x. Rep LREM x -&gt; LREM
to :: forall x. Rep LREM x -&gt; LREM
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680937445"><span id="local-6989586621680937452"><span id="local-6989586621680937458"><span class="annot"><a href="file:///home/artem/.cabal/store/ghc-9.4.5/GenericPretty-1.2.2-7277c36a966d41cd8e1371a7ee4c855b29a76e94dfe1d95510f68242766a5b82/share/doc/html/src/Text.PrettyPrint.GenericPretty.html#Out"><span class="hs-identifier hs-type">Out</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-type">LREM</span></a></span></span></span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-type">LREM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621680937548"><span class="annot"><span class="annottext">rnf :: LREM -&gt; ()
</span><a href="#local-6989586621680937548"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-type">LREM</span></a></span><span> </span><span id="local-6989586621680937550"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937550"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680937551"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937551"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680937552"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937552"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680937553"><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621680937553"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937550"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Prim.html#seq"><span class="hs-operator hs-var">`seq`</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937551"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Prim.html#seq"><span class="hs-operator hs-var">`seq`</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937552"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Prim.html#seq"><span class="hs-operator hs-var">`seq`</span></a></span><span> </span><span class="annot"><span class="annottext">Modality -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621680937553"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#fromLRM"><span class="hs-identifier hs-type">fromLRM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LRM"><span class="hs-identifier hs-type">Old.LRM</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-type">LREM</span></a></span><span>
</span><span id="line-94"></span><span id="fromLRM"><span class="annot"><span class="annottext">fromLRM :: LRM -&gt; LREM
</span><a href="Gibbon.NewL2.Syntax.html#fromLRM"><span class="hs-identifier hs-var hs-var">fromLRM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L2.Syntax.html#LRM"><span class="hs-identifier hs-type">Old.LRM</span></a></span><span> </span><span id="local-6989586621680937555"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937555"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680937556"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680937556"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680937557"><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621680937557"><span class="hs-identifier hs-var">mode</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; LocVar -&gt; LocVar -&gt; Modality -&gt; LREM
</span><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-var">LREM</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937555"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680937556"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar -&gt; LocVar
</span><a href="Gibbon.Common.html#toEndV"><span class="hs-identifier hs-var">toEndV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680937556"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621680937557"><span class="hs-identifier hs-var">mode</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">data</span><span> </span><span id="LocArg"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-var">LocArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Loc"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Loc"><span class="hs-identifier hs-var">Loc</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-type">LREM</span></a></span><span>
</span><span id="line-97"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="EndWitness"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#EndWitness"><span class="hs-identifier hs-var">EndWitness</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LREM"><span class="hs-identifier hs-type">LREM</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-98"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="Reg"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Reg"><span class="hs-identifier hs-var">Reg</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.Common.html#RegVar"><span class="hs-identifier hs-type">RegVar</span></a></span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Modality"><span class="hs-identifier hs-type">Old.Modality</span></a></span><span>
</span><span id="line-99"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="EndOfReg"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#EndOfReg"><span class="hs-identifier hs-var">EndOfReg</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.Common.html#RegVar"><span class="hs-identifier hs-type">RegVar</span></a></span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#Modality"><span class="hs-identifier hs-type">Old.Modality</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#RegVar"><span class="hs-identifier hs-type">RegVar</span></a></span><span>
</span><span id="line-100"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="EndOfReg_Tagged"><span class="annot"><a href="Gibbon.NewL2.Syntax.html#EndOfReg_Tagged"><span class="hs-identifier hs-var">EndOfReg_Tagged</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.Common.html#RegVar"><span class="hs-identifier hs-type">RegVar</span></a></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680937566"><span id="local-6989586621680937570"><span id="local-6989586621680937573"><span id="local-6989586621680937603"><span class="annot"><span class="annottext">ReadPrec [LocArg]
ReadPrec LocArg
Int -&gt; ReadS LocArg
ReadS [LocArg]
(Int -&gt; ReadS LocArg)
-&gt; ReadS [LocArg]
-&gt; ReadPrec LocArg
-&gt; ReadPrec [LocArg]
-&gt; Read LocArg
forall a.
(Int -&gt; ReadS a)
-&gt; ReadS [a] -&gt; ReadPrec a -&gt; ReadPrec [a] -&gt; Read a
$creadsPrec :: Int -&gt; ReadS LocArg
readsPrec :: Int -&gt; ReadS LocArg
$creadList :: ReadS [LocArg]
readList :: ReadS [LocArg]
$creadPrec :: ReadPrec LocArg
readPrec :: ReadPrec LocArg
$creadListPrec :: ReadPrec [LocArg]
readListPrec :: ReadPrec [LocArg]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Read.html#Read"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Read</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937606"><span id="local-6989586621680937622"><span id="local-6989586621680937626"><span class="annot"><span class="annottext">Int -&gt; LocArg -&gt; ShowS
[LocArg] -&gt; ShowS
LocArg -&gt; String
(Int -&gt; LocArg -&gt; ShowS)
-&gt; (LocArg -&gt; String) -&gt; ([LocArg] -&gt; ShowS) -&gt; Show LocArg
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; LocArg -&gt; ShowS
showsPrec :: Int -&gt; LocArg -&gt; ShowS
$cshow :: LocArg -&gt; String
show :: LocArg -&gt; String
$cshowList :: [LocArg] -&gt; ShowS
showList :: [LocArg] -&gt; ShowS
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937629"><span id="local-6989586621680937640"><span class="annot"><span class="annottext">LocArg -&gt; LocArg -&gt; Bool
(LocArg -&gt; LocArg -&gt; Bool)
-&gt; (LocArg -&gt; LocArg -&gt; Bool) -&gt; Eq LocArg
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LocArg -&gt; LocArg -&gt; Bool
== :: LocArg -&gt; LocArg -&gt; Bool
$c/= :: LocArg -&gt; LocArg -&gt; Bool
/= :: LocArg -&gt; LocArg -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937646"><span id="local-6989586621680937657"><span id="local-6989586621680937661"><span id="local-6989586621680937664"><span id="local-6989586621680937667"><span id="local-6989586621680937670"><span id="local-6989586621680937673"><span class="annot"><span class="annottext">Eq LocArg
Eq LocArg
-&gt; (LocArg -&gt; LocArg -&gt; Ordering)
-&gt; (LocArg -&gt; LocArg -&gt; Bool)
-&gt; (LocArg -&gt; LocArg -&gt; Bool)
-&gt; (LocArg -&gt; LocArg -&gt; Bool)
-&gt; (LocArg -&gt; LocArg -&gt; Bool)
-&gt; (LocArg -&gt; LocArg -&gt; LocArg)
-&gt; (LocArg -&gt; LocArg -&gt; LocArg)
-&gt; Ord LocArg
LocArg -&gt; LocArg -&gt; Bool
LocArg -&gt; LocArg -&gt; Ordering
LocArg -&gt; LocArg -&gt; LocArg
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: LocArg -&gt; LocArg -&gt; Ordering
compare :: LocArg -&gt; LocArg -&gt; Ordering
$c&lt; :: LocArg -&gt; LocArg -&gt; Bool
&lt; :: LocArg -&gt; LocArg -&gt; Bool
$c&lt;= :: LocArg -&gt; LocArg -&gt; Bool
&lt;= :: LocArg -&gt; LocArg -&gt; Bool
$c&gt; :: LocArg -&gt; LocArg -&gt; Bool
&gt; :: LocArg -&gt; LocArg -&gt; Bool
$c&gt;= :: LocArg -&gt; LocArg -&gt; Bool
&gt;= :: LocArg -&gt; LocArg -&gt; Bool
$cmax :: LocArg -&gt; LocArg -&gt; LocArg
max :: LocArg -&gt; LocArg -&gt; LocArg
$cmin :: LocArg -&gt; LocArg -&gt; LocArg
min :: LocArg -&gt; LocArg -&gt; LocArg
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680937676"><span id="local-6989586621680937678"><span class="annot"><span class="annottext">(forall x. LocArg -&gt; Rep LocArg x)
-&gt; (forall x. Rep LocArg x -&gt; LocArg) -&gt; Generic LocArg
forall x. Rep LocArg x -&gt; LocArg
forall x. LocArg -&gt; Rep LocArg x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. LocArg -&gt; Rep LocArg x
from :: forall x. LocArg -&gt; Rep LocArg x
$cto :: forall x. Rep LocArg x -&gt; LocArg
to :: forall x. Rep LocArg x -&gt; LocArg
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680937681"><span id="local-6989586621680937688"><span id="local-6989586621680937694"><span class="annot"><a href="file:///home/artem/.cabal/store/ghc-9.4.5/GenericPretty-1.2.2-7277c36a966d41cd8e1371a7ee4c855b29a76e94dfe1d95510f68242766a5b82/share/doc/html/src/Text.PrettyPrint.GenericPretty.html#Out"><span class="hs-identifier hs-type">Out</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span></span></span></span><span>
</span><span id="line-104"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680937785"><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/deepseq-1.4.8.0/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-type">toLocVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span>
</span><span id="line-107"></span><span id="toLocVar"><span class="annot"><span class="annottext">toLocVar :: LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var hs-var">toLocVar</span></a></span></span><span> </span><span id="local-6989586621680937815"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680937815"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680937815"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Loc"><span class="hs-identifier hs-type">Loc</span></a></span><span> </span><span id="local-6989586621680937816"><span class="annot"><span class="annottext">LREM
</span><a href="#local-6989586621680937816"><span class="hs-identifier hs-var">lrm</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LREM -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#lremLoc"><span class="hs-identifier hs-var">lremLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LREM
</span><a href="#local-6989586621680937816"><span class="hs-identifier hs-var">lrm</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#EndWitness"><span class="hs-identifier hs-type">EndWitness</span></a></span><span> </span><span class="annot"><span class="annottext">LREM
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680937817"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937817"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937817"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Reg"><span class="hs-identifier hs-type">Reg</span></a></span><span> </span><span id="local-6989586621680937818"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937818"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Modality
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937818"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#EndOfReg"><span class="hs-identifier hs-type">EndOfReg</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Modality
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680937819"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937819"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937819"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#EndOfReg_Tagged"><span class="hs-identifier hs-type">EndOfReg_Tagged</span></a></span><span> </span><span id="local-6989586621680937820"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937820"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toEndFromTaggedV"><span class="hs-identifier hs-var">toEndFromTaggedV</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937820"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680937822"><span id="local-6989586621680937829"><span id="local-6989586621680937835"><span class="annot"><a href="file:///home/artem/.cabal/store/ghc-9.4.5/GenericPretty-1.2.2-7277c36a966d41cd8e1371a7ee4c855b29a76e94dfe1d95510f68242766a5b82/share/doc/html/src/Text.PrettyPrint.GenericPretty.html#Out"><span class="hs-identifier hs-type">Out</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L2.Syntax.html#ArrowTy2"><span class="hs-identifier hs-type">Old.ArrowTy2</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#toTagV"><span class="hs-identifier hs-type">toTagV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-118"></span><span id="toTagV"><span class="annot"><span class="annottext">toTagV :: LocVar -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toTagV"><span class="hs-identifier hs-var hs-var">toTagV</span></a></span></span><span> </span><span id="local-6989586621680937967"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937967"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; LocVar
</span><a href="Gibbon.Common.html#toVar"><span class="hs-identifier hs-var">toVar</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tag_&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; LocVar -&gt; LocVar
</span><a href="Gibbon.Common.html#varAppend"><span class="hs-operator hs-var">`varAppend`</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937967"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#toEndFromTaggedV"><span class="hs-identifier hs-type">toEndFromTaggedV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-121"></span><span id="toEndFromTaggedV"><span class="annot"><span class="annottext">toEndFromTaggedV :: LocVar -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toEndFromTaggedV"><span class="hs-identifier hs-var hs-var">toEndFromTaggedV</span></a></span></span><span> </span><span id="local-6989586621680937970"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937970"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; LocVar
</span><a href="Gibbon.Common.html#toVar"><span class="hs-identifier hs-var">toVar</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;end_from_tagged_&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; LocVar -&gt; LocVar
</span><a href="Gibbon.Common.html#varAppend"><span class="hs-operator hs-var">`varAppend`</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937970"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocExp"><span class="hs-identifier hs-type">LocExp</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621680937975"><span class="annot"><span class="annottext">gFreeVars :: LocExp -&gt; Set LocVar
</span><a href="#local-6989586621680937975"><span class="hs-identifier hs-var hs-var hs-var hs-var">gFreeVars</span></a></span></span><span> </span><span id="local-6989586621680937977"><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680937977"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680937977"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AfterConstantLE"><span class="hs-identifier hs-type">Old.AfterConstantLE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680937979"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680937979"><span class="hs-identifier hs-var">loc</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680937979"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AfterVariableLE"><span class="hs-identifier hs-type">Old.AfterVariableLE</span></a></span><span> </span><span id="local-6989586621680937982"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937982"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680937983"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680937983"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680937982"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680937983"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-130"></span><span>      </span><span class="annot"><span class="annottext">LocExp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set LocVar
forall a. Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">S.empty</span></a></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L2.Syntax.html#E2Ext"><span class="hs-identifier hs-type">Old.E2Ext</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-134"></span><span>  </span><span id="local-6989586621680938018"><span class="annot"><span class="annottext">gRecoverType :: DDefs (TyOf (E2Ext LocArg Ty2))
-&gt; Env2 (TyOf (E2Ext LocArg Ty2))
-&gt; E2Ext LocArg Ty2
-&gt; TyOf (E2Ext LocArg Ty2)
</span><a href="#local-6989586621680938018"><span class="hs-identifier hs-var hs-var hs-var hs-var">gRecoverType</span></a></span></span><span> </span><span id="local-6989586621680938020"><span class="annot"><span class="annottext">DDefs (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938020"><span class="hs-identifier hs-var">ddfs</span></a></span></span><span> </span><span id="local-6989586621680938021"><span class="annot"><span class="annottext">Env2 (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938021"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span id="local-6989586621680938022"><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938022"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938022"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-type">Old.LetRegionE</span></a></span><span> </span><span id="local-6989586621680938024"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938024"><span class="hs-identifier hs-var">_r</span></a></span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938025"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938025"><span class="hs-identifier hs-var">bod</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938020"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938021"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938025"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-137"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-type">Old.LetParRegionE</span></a></span><span> </span><span id="local-6989586621680938027"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938027"><span class="hs-identifier hs-var">_r</span></a></span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938028"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938028"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938020"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938021"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938028"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-138"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#StartOfPkdCursor"><span class="hs-identifier hs-type">Old.StartOfPkdCursor</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.Syntax.html#CursorTy"><span class="hs-identifier hs-var">CursorTy</span></a></span><span>
</span><span id="line-139"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#TagCursor"><span class="hs-identifier hs-type">Old.TagCursor</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.Syntax.html#CursorTy"><span class="hs-identifier hs-var">CursorTy</span></a></span><span>
</span><span id="line-140"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">Old.LetLocE</span></a></span><span> </span><span id="local-6989586621680938033"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938033"><span class="hs-identifier hs-var">_l</span></a></span></span><span> </span><span id="local-6989586621680938034"><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680938034"><span class="hs-identifier hs-var">_rhs</span></a></span></span><span> </span><span id="local-6989586621680938035"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938035"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938020"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938021"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938035"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-141"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#RetE"><span class="hs-identifier hs-type">Old.RetE</span></a></span><span> </span><span id="local-6989586621680938037"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938037"><span class="hs-identifier hs-var">_loc</span></a></span></span><span> </span><span id="local-6989586621680938038"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938038"><span class="hs-identifier hs-var">var</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Map LocVar Ty2 -&gt; Maybe Ty2
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938038"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Env2 Ty2 -&gt; Map LocVar Ty2
forall a. Env2 a -&gt; TyEnv a
</span><a href="Gibbon.Language.Syntax.html#vEnv"><span class="hs-identifier hs-var">vEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2Ext LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938021"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-142"></span><span>                                   </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680938041"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938041"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyOf (E2Ext LocArg Ty2)
Ty2
</span><a href="#local-6989586621680938041"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-143"></span><span>                                   </span><span class="annot"><span class="annottext">Maybe Ty2
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; TyOf (E2Ext LocArg Ty2)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TyOf (E2Ext LocArg Ty2))
-&gt; String -&gt; TyOf (E2Ext LocArg Ty2)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gRecoverType: unbound variable &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; String
forall a. Out a =&gt; a -&gt; String
</span><a href="Gibbon.Common.html#sdoc"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938038"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-144"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#FromEndE"><span class="hs-identifier hs-type">Old.FromEndE</span></a></span><span> </span><span id="local-6989586621680938045"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938045"><span class="hs-identifier hs-var">_loc</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ty2
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Shouldn't enconter FromEndE in tail position&quot;</span></span><span>
</span><span id="line-145"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#BoundsCheck"><span class="hs-identifier hs-type">Old.BoundsCheck</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ty2
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Shouldn't enconter BoundsCheck in tail position&quot;</span></span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#IndirectionE"><span class="hs-identifier hs-type">Old.IndirectionE</span></a></span><span> </span><span id="local-6989586621680938048"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938048"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(LocArg, LocArg)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938049"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938049"><span class="hs-identifier hs-var">to</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LocArg
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; LocVar -&gt; UrTy LocVar
forall loc. String -&gt; loc -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#PackedTy"><span class="hs-identifier hs-var">PackedTy</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938048"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938049"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AddFixed"><span class="hs-identifier hs-type">Old.AddFixed</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ty2
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Shouldn't enconter AddFixed in tail position&quot;</span></span><span>
</span><span id="line-148"></span><span>      </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="Gibbon.L2.Syntax.html#GetCilkWorkerNum"><span class="hs-identifier hs-var">Old.GetCilkWorkerNum</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.Syntax.html#IntTy"><span class="hs-identifier hs-var">IntTy</span></a></span><span>
</span><span id="line-149"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-type">Old.LetAvail</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938055"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938055"><span class="hs-identifier hs-var">bod</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938020"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938021"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938055"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-150"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateTagHere"><span class="hs-identifier hs-type">Old.AllocateTagHere</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar] -&gt; UrTy LocVar
forall loc. [UrTy loc] -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-var">ProdTy</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-151"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateScalarsHere"><span class="hs-identifier hs-type">Old.AllocateScalarsHere</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar] -&gt; UrTy LocVar
forall loc. [UrTy loc] -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-var">ProdTy</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-152"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPush"><span class="hs-identifier hs-type">Old.SSPush</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar] -&gt; UrTy LocVar
forall loc. [UrTy loc] -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-var">ProdTy</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPop"><span class="hs-identifier hs-type">Old.SSPop</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar] -&gt; UrTy LocVar
forall loc. [UrTy loc] -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-var">ProdTy</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | The 'gRecoverType' instance defined in Language.Syntax is incorrect for L2.</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- For the AppE case, it'll just return the type with with the function was</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- defined. However, we want the recovered type to have the locations actually</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- used at the callsites! For example,</span><span>
</span><span id="line-160"></span><span class="hs-comment">--</span><span>
</span><span id="line-161"></span><span class="hs-comment">--     add1 :: Tree @ a -&gt; Tree @ b</span><span>
</span><span id="line-162"></span><span class="hs-comment">--     add1 = _</span><span>
</span><span id="line-163"></span><span class="hs-comment">--</span><span>
</span><span id="line-164"></span><span class="hs-comment">--     ... (add1 [loc1, loc2] tr1) ..</span><span>
</span><span id="line-165"></span><span class="hs-comment">--</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- in this case, we want the type of (add1 tr1) to be (Tree @ loc2)</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- and NOT (Tree @ b). We have to do something similar for variables bound by</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- a pattern match.</span><span>
</span><span id="line-169"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/artem/.cabal/store/ghc-9.4.5/GenericPretty-1.2.2-7277c36a966d41cd8e1371a7ee4c855b29a76e94dfe1d95510f68242766a5b82/share/doc/html/src/Text.PrettyPrint.GenericPretty.html#Out"><span class="hs-identifier hs-type">Out</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L2.Syntax.html#E2Ext"><span class="hs-identifier hs-type">Old.E2Ext</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#PreExp"><span class="hs-identifier hs-type">PreExp</span></a></span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#E2Ext"><span class="hs-identifier hs-type">Old.E2Ext</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>  </span><span id="local-6989586621680938125"><span class="annot"><span class="annottext">gRecoverType :: DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var hs-var hs-var hs-var">gRecoverType</span></a></span></span><span> </span><span id="local-6989586621680938126"><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span></span><span> </span><span id="local-6989586621680938127"><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span id="local-6989586621680938128"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938128"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938128"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-172"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-type">VarE</span></a></span><span> </span><span id="local-6989586621680938130"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938130"><span class="hs-identifier hs-var">v</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; LocVar -&gt; Map LocVar Ty2 -&gt; Ty2
forall k a. Ord k =&gt; a -&gt; k -&gt; Map k a -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#findWithDefault"><span class="hs-identifier hs-var">M.findWithDefault</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Ty2
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Ty2) -&gt; String -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot find type of variable &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938130"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; in &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar Ty2 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Env2 Ty2 -&gt; Map LocVar Ty2
forall a. Env2 a -&gt; TyEnv a
</span><a href="Gibbon.Language.Syntax.html#vEnv"><span class="hs-identifier hs-var">vEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938130"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Env2 Ty2 -&gt; Map LocVar Ty2
forall a. Env2 a -&gt; TyEnv a
</span><a href="Gibbon.Language.Syntax.html#vEnv"><span class="hs-identifier hs-var">vEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LitE"><span class="hs-identifier hs-type">LitE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.Syntax.html#IntTy"><span class="hs-identifier hs-var">IntTy</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CharE"><span class="hs-identifier hs-type">CharE</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.Syntax.html#CharTy"><span class="hs-identifier hs-var">CharTy</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FloatE"><span class="hs-identifier hs-type">FloatE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.Syntax.html#FloatTy"><span class="hs-identifier hs-var">FloatTy</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LitSymE"><span class="hs-identifier hs-type">LitSymE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.Syntax.html#SymTy"><span class="hs-identifier hs-var">SymTy</span></a></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-type">AppE</span></a></span><span> </span><span id="local-6989586621680938141"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938141"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680938142"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938142"><span class="hs-identifier hs-var">locargs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-178"></span><span>                       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680938143"><span class="annot"><span class="annottext">fnty :: ArrowTy2 Ty2
</span><a href="#local-6989586621680938143"><span class="hs-identifier hs-var hs-var">fnty</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Env2 Ty2 -&gt; TyEnv (ArrowTy Ty2)
forall a. Env2 a -&gt; TyEnv (ArrowTy a)
</span><a href="Gibbon.Language.Syntax.html#fEnv"><span class="hs-identifier hs-var">fEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar (ArrowTy2 Ty2) -&gt; LocVar -&gt; ArrowTy2 Ty2
forall a b.
(Ord a, Out a, Out b, Show a, HasCallStack) =&gt;
Map a b -&gt; a -&gt; b
</span><a href="Gibbon.Common.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938141"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-179"></span><span>                           </span><span id="local-6989586621680938146"><span class="annot"><span class="annottext">outty :: Ty2
</span><a href="#local-6989586621680938146"><span class="hs-identifier hs-var hs-var">outty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArrowTy2 Ty2 -&gt; Ty2
forall ty2. ArrowTy2 ty2 -&gt; ty2
</span><a href="Gibbon.L2.Syntax.html#arrOut"><span class="hs-identifier hs-var">Old.arrOut</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowTy2 Ty2
</span><a href="#local-6989586621680938143"><span class="hs-identifier hs-var">fnty</span></a></span><span>
</span><span id="line-180"></span><span>                           </span><span id="local-6989586621680938147"><span class="annot"><span class="annottext">mp :: Map LocVar LocVar
</span><a href="#local-6989586621680938147"><span class="hs-identifier hs-var hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocVar)] -&gt; Map LocVar LocVar
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#fromList"><span class="hs-identifier hs-var">M.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(LocVar, LocVar)] -&gt; Map LocVar LocVar)
-&gt; [(LocVar, LocVar)] -&gt; Map LocVar LocVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [(LocVar, LocVar)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArrowTy2 Ty2 -&gt; [LocVar]
forall ty2. ArrowTy2 ty2 -&gt; [LocVar]
</span><a href="Gibbon.L2.Syntax.html#allLocVars"><span class="hs-identifier hs-var">Old.allLocVars</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowTy2 Ty2
</span><a href="#local-6989586621680938143"><span class="hs-identifier hs-var">fnty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938142"><span class="hs-identifier hs-var">locargs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>                       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar -&gt; Ty2 -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier hs-var">substLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar
</span><a href="#local-6989586621680938147"><span class="hs-identifier hs-var">mp</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938146"><span class="hs-identifier hs-var">outty</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#DictInsertP"><span class="hs-identifier hs-type">DictInsertP</span></a></span><span> </span><span id="local-6989586621680938151"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938151"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-type">VarE</span></a></span><span> </span><span id="local-6989586621680938152"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938152"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-type">:</span></a></span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LocVar -&gt; UrTy () -&gt; UrTy LocVar
forall loc. Maybe LocVar -&gt; UrTy () -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#SymDictTy"><span class="hs-identifier hs-var">SymDictTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar -&gt; Maybe LocVar
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938152"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(UrTy () -&gt; UrTy LocVar) -&gt; UrTy () -&gt; UrTy LocVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938151"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#DictEmptyP"><span class="hs-identifier hs-type">DictEmptyP</span></a></span><span>  </span><span id="local-6989586621680938156"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938156"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-type">VarE</span></a></span><span> </span><span id="local-6989586621680938157"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938157"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-type">:</span></a></span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LocVar -&gt; UrTy () -&gt; UrTy LocVar
forall loc. Maybe LocVar -&gt; UrTy () -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#SymDictTy"><span class="hs-identifier hs-var">SymDictTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar -&gt; Maybe LocVar
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938157"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(UrTy () -&gt; UrTy LocVar) -&gt; UrTy () -&gt; UrTy LocVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938156"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span id="local-6989586621680938158"><span class="annot"><span class="annottext">Prim Ty2
</span><a href="#local-6989586621680938158"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Prim (UrTy LocVar) -&gt; UrTy LocVar
forall a. Prim (UrTy a) -&gt; UrTy a
</span><a href="Gibbon.Language.html#primRetTy"><span class="hs-identifier hs-var">primRetTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Ty2 -&gt; UrTy LocVar) -&gt; Prim Ty2 -&gt; Prim (UrTy LocVar)
forall a b. (a -&gt; b) -&gt; Prim a -&gt; Prim b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Prim Ty2
</span><a href="#local-6989586621680938158"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938161"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938161"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621680938162"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938162"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938163"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938163"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar -&gt; Ty2 -&gt; Env2 Ty2 -&gt; Env2 Ty2
forall a. LocVar -&gt; a -&gt; Env2 a -&gt; Env2 a
</span><a href="Gibbon.Language.Syntax.html#extendVEnv"><span class="hs-identifier hs-var">extendVEnv</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938161"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938162"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938163"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-type">IfE</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938166"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938166"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938166"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-189"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-type">MkProdE</span></a></span><span> </span><span id="local-6989586621680938168"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938168"><span class="hs-identifier hs-var">es</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar] -&gt; UrTy LocVar
forall loc. [UrTy loc] -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-var">ProdTy</span></a></span><span> </span><span class="annot"><span class="annottext">([UrTy LocVar] -&gt; UrTy LocVar) -&gt; [UrTy LocVar] -&gt; UrTy LocVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; UrTy LocVar) -&gt; [E2 LocArg Ty2] -&gt; [UrTy LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(Ty2 -&gt; UrTy LocVar)
-&gt; (E2 LocArg Ty2 -&gt; Ty2) -&gt; E2 LocArg Ty2 -&gt; UrTy LocVar
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938168"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-190"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-type">DataConE</span></a></span><span> </span><span id="local-6989586621680938171"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938171"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680938172"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938172"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; LocVar -&gt; UrTy LocVar
forall loc. String -&gt; loc -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#PackedTy"><span class="hs-identifier hs-var">PackedTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DDefs Ty2 -&gt; ShowS
forall a. Out a =&gt; DDefs a -&gt; ShowS
</span><a href="Gibbon.Language.Syntax.html#getTyOfDataCon"><span class="hs-identifier hs-var">getTyOfDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs Ty2
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938172"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938171"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-type">TimeIt</span></a></span><span> </span><span id="local-6989586621680938175"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938175"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938175"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MapE"><span class="hs-identifier hs-type">MapE</span></a></span><span> </span><span class="annot"><span class="annottext">(LocVar, Ty2, E2 LocArg Ty2)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938177"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938177"><span class="hs-identifier hs-var">e</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938177"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FoldE"><span class="hs-identifier hs-type">FoldE</span></a></span><span> </span><span class="annot"><span class="annottext">(LocVar, Ty2, E2 LocArg Ty2)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(LocVar, Ty2, E2 LocArg Ty2)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938179"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938179"><span class="hs-identifier hs-var">e</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938179"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-194"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span id="local-6989586621680938181"><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938181"><span class="hs-identifier hs-var">ext</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2Ext LocArg Ty2))
-&gt; Env2 (TyOf (E2Ext LocArg Ty2))
-&gt; E2Ext LocArg Ty2
-&gt; TyOf (E2Ext LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 (TyOf (E2Ext LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938181"><span class="hs-identifier hs-var">ext</span></a></span><span>
</span><span id="line-195"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-type">ProjE</span></a></span><span> </span><span id="local-6989586621680938183"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680938183"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680938184"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938184"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(Ty2 -&gt; UrTy LocVar) -&gt; Ty2 -&gt; UrTy LocVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938184"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-type">ProdTy</span></a></span><span> </span><span id="local-6989586621680938185"><span class="annot"><span class="annottext">[UrTy LocVar]
</span><a href="#local-6989586621680938185"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[UrTy LocVar]
</span><a href="#local-6989586621680938185"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar] -&gt; Int -&gt; UrTy LocVar
forall a. HasCallStack =&gt; [a] -&gt; Int -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#%21%21"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680938183"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>          </span><span id="local-6989586621680938187"><span class="annot"><span class="annottext">UrTy LocVar
</span><a href="#local-6989586621680938187"><span class="hs-identifier hs-var">oth</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; TyOf (E2 LocArg Ty2)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span class="annot"><span class="annottext">(String -&gt; TyOf (E2 LocArg Ty2)) -&gt; String -&gt; TyOf (E2 LocArg Ty2)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;typeExp: Cannot project fields from this type: &quot;</span></span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">UrTy LocVar -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
</span><a href="#local-6989586621680938187"><span class="hs-identifier hs-var">oth</span></a></span><span>
</span><span id="line-199"></span><span>                        </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nExpression:\n  &quot;</span></span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; String
forall a. Out a =&gt; a -&gt; String
</span><a href="Gibbon.Common.html#sdoc"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938128"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-200"></span><span>                        </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nEnvironment:\n  &quot;</span></span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="annot"><span class="annottext">Map LocVar Ty2 -&gt; String
forall a. Out a =&gt; a -&gt; String
</span><a href="Gibbon.Common.html#sdoc"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Env2 Ty2 -&gt; Map LocVar Ty2
forall a. Env2 a -&gt; TyEnv a
</span><a href="Gibbon.Language.Syntax.html#vEnv"><span class="hs-identifier hs-var">vEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-type">SpawnE</span></a></span><span> </span><span id="local-6989586621680938189"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938189"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680938190"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938190"><span class="hs-identifier hs-var">locargs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-202"></span><span>                         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680938191"><span class="annot"><span class="annottext">fnty :: ArrowTy2 Ty2
</span><a href="#local-6989586621680938191"><span class="hs-identifier hs-var hs-var">fnty</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Env2 Ty2 -&gt; TyEnv (ArrowTy Ty2)
forall a. Env2 a -&gt; TyEnv (ArrowTy a)
</span><a href="Gibbon.Language.Syntax.html#fEnv"><span class="hs-identifier hs-var">fEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar (ArrowTy2 Ty2) -&gt; LocVar -&gt; ArrowTy2 Ty2
forall a b.
(Ord a, Out a, Out b, Show a, HasCallStack) =&gt;
Map a b -&gt; a -&gt; b
</span><a href="Gibbon.Common.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938189"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-203"></span><span>                             </span><span id="local-6989586621680938192"><span class="annot"><span class="annottext">outty :: Ty2
</span><a href="#local-6989586621680938192"><span class="hs-identifier hs-var hs-var">outty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArrowTy2 Ty2 -&gt; Ty2
forall ty2. ArrowTy2 ty2 -&gt; ty2
</span><a href="Gibbon.L2.Syntax.html#arrOut"><span class="hs-identifier hs-var">Old.arrOut</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowTy2 Ty2
</span><a href="#local-6989586621680938191"><span class="hs-identifier hs-var">fnty</span></a></span><span>
</span><span id="line-204"></span><span>                             </span><span id="local-6989586621680938193"><span class="annot"><span class="annottext">mp :: Map LocVar LocVar
</span><a href="#local-6989586621680938193"><span class="hs-identifier hs-var hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocVar)] -&gt; Map LocVar LocVar
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#fromList"><span class="hs-identifier hs-var">M.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(LocVar, LocVar)] -&gt; Map LocVar LocVar)
-&gt; [(LocVar, LocVar)] -&gt; Map LocVar LocVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [(LocVar, LocVar)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArrowTy2 Ty2 -&gt; [LocVar]
forall ty2. ArrowTy2 ty2 -&gt; [LocVar]
</span><a href="Gibbon.L2.Syntax.html#allLocVars"><span class="hs-identifier hs-var">Old.allLocVars</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowTy2 Ty2
</span><a href="#local-6989586621680938191"><span class="hs-identifier hs-var">fnty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938190"><span class="hs-identifier hs-var">locargs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>                         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar -&gt; Ty2 -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier hs-var">substLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar
</span><a href="#local-6989586621680938193"><span class="hs-identifier hs-var">mp</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938192"><span class="hs-identifier hs-var">outty</span></a></span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="Gibbon.Language.Syntax.html#SyncE"><span class="hs-identifier hs-var">SyncE</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar
forall loc. UrTy loc
</span><a href="Gibbon.Language.html#voidTy"><span class="hs-identifier hs-var">voidTy</span></a></span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-type">WithArenaE</span></a></span><span> </span><span id="local-6989586621680938197"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938197"><span class="hs-identifier hs-var">_v</span></a></span></span><span> </span><span id="local-6989586621680938198"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938198"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938198"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-208"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938200"><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938200"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-209"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938201"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938201"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938202"><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938202"><span class="hs-identifier hs-var">vlocargs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938203"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938203"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
-&gt; (String, [(LocVar, LocArg)], E2 LocArg Ty2)
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938200"><span class="hs-identifier hs-var">mp</span></a></span><span>
</span><span id="line-210"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621680938205"><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938205"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938206"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938206"><span class="hs-identifier hs-var">locargs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)] -&gt; ([LocVar], [LocArg])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938202"><span class="hs-identifier hs-var">vlocargs</span></a></span><span>
</span><span id="line-211"></span><span>            </span><span id="local-6989586621680938208"><span class="annot"><span class="annottext">locs :: [LocVar]
</span><a href="#local-6989586621680938208"><span class="hs-identifier hs-var hs-var">locs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938206"><span class="hs-identifier hs-var">locargs</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>            </span><span id="local-6989586621680938209"><span class="annot"><span class="annottext">env2' :: Env2 Ty2
</span><a href="#local-6989586621680938209"><span class="hs-identifier hs-var hs-var">env2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt;
String -&gt; DDefs Ty2 -&gt; [LocVar] -&gt; [LocVar] -&gt; Env2 Ty2 -&gt; Env2 Ty2
String -&gt; DDefs Ty2 -&gt; [LocVar] -&gt; [LocVar] -&gt; Env2 Ty2 -&gt; Env2 Ty2
</span><a href="Gibbon.NewL2.Syntax.html#extendPatternMatchEnv"><span class="hs-identifier hs-var">extendPatternMatchEnv</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938201"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs Ty2
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938205"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938208"><span class="hs-identifier hs-var">locs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938127"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
-&gt; Env2 (TyOf (E2 LocArg Ty2))
-&gt; E2 LocArg Ty2
-&gt; TyOf (E2 LocArg Ty2)
forall e.
Typeable e =&gt;
DDefs (TyOf e) -&gt; Env2 (TyOf e) -&gt; e -&gt; TyOf e
</span><a href="Gibbon.Language.Syntax.html#gRecoverType"><span class="hs-identifier hs-var">gRecoverType</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938126"><span class="hs-identifier hs-var">ddfs</span></a></span><span> </span><span class="annot"><span class="annottext">Env2 (TyOf (E2 LocArg Ty2))
Env2 Ty2
</span><a href="#local-6989586621680938209"><span class="hs-identifier hs-var">env2'</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938203"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- Need to redefine the following because of the Ty2 newtype:</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="annot"><span class="hs-comment">-- | Apply a location substitution to a type.</span></span><span>
</span><span id="line-220"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier hs-type">substLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span>
</span><span id="line-221"></span><span id="substLoc"><span class="annot"><span class="annottext">substLoc :: Map LocVar LocVar -&gt; Ty2 -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier hs-var hs-var">substLoc</span></a></span></span><span> </span><span id="local-6989586621680938211"><span class="annot"><span class="annottext">Map LocVar LocVar
</span><a href="#local-6989586621680938211"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span id="local-6989586621680938212"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938212"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938212"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-223"></span><span>   </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SymDictTy"><span class="hs-identifier hs-type">SymDictTy</span></a></span><span> </span><span id="local-6989586621680938213"><span class="annot"><span class="annottext">Maybe LocVar
</span><a href="#local-6989586621680938213"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680938214"><span class="annot"><span class="annottext">UrTy ()
</span><a href="#local-6989586621680938214"><span class="hs-identifier hs-var">te</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe LocVar -&gt; UrTy () -&gt; UrTy LocVar
forall loc. Maybe LocVar -&gt; UrTy () -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#SymDictTy"><span class="hs-identifier hs-var">SymDictTy</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LocVar
</span><a href="#local-6989586621680938213"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy ()
</span><a href="#local-6989586621680938214"><span class="hs-identifier hs-var">te</span></a></span><span> </span><span class="hs-comment">-- (go te)</span><span>
</span><span id="line-224"></span><span>   </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-type">ProdTy</span></a></span><span>    </span><span id="local-6989586621680938215"><span class="annot"><span class="annottext">[UrTy LocVar]
</span><a href="#local-6989586621680938215"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar] -&gt; UrTy LocVar
forall loc. [UrTy loc] -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-var">ProdTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; UrTy LocVar) -&gt; [UrTy LocVar] -&gt; [UrTy LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">(Ty2 -&gt; UrTy LocVar)
-&gt; (UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; UrTy LocVar
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; Ty2
</span><a href="#local-6989586621680938216"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Ty2 -&gt; Ty2) -&gt; (UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; Ty2
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar]
</span><a href="#local-6989586621680938215"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>   </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PackedTy"><span class="hs-identifier hs-type">PackedTy</span></a></span><span> </span><span id="local-6989586621680938217"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938217"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621680938218"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938218"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-226"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Map LocVar LocVar -&gt; Maybe LocVar
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938218"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar
</span><a href="#local-6989586621680938211"><span class="hs-identifier hs-var">mp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-227"></span><span>             </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680938219"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938219"><span class="hs-identifier hs-var">v</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LocVar -&gt; UrTy LocVar
forall loc. String -&gt; loc -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#PackedTy"><span class="hs-identifier hs-var">PackedTy</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938217"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938219"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-228"></span><span>             </span><span class="annot"><span class="annottext">Maybe LocVar
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LocVar -&gt; UrTy LocVar
forall loc. String -&gt; loc -&gt; UrTy loc
</span><a href="Gibbon.Language.Syntax.html#PackedTy"><span class="hs-identifier hs-var">PackedTy</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938217"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938218"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-229"></span><span>   </span><span class="annot"><span class="annottext">UrTy LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938212"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680938216"><span class="annot"><span class="annottext">go :: Ty2 -&gt; Ty2
</span><a href="#local-6989586621680938216"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar -&gt; Ty2 -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier hs-var">substLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar
</span><a href="#local-6989586621680938211"><span class="hs-identifier hs-var">mp</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="annot"><span class="hs-comment">-- | List version of 'substLoc'.</span></span><span>
</span><span id="line-233"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#substLocs"><span class="hs-identifier hs-type">substLocs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-234"></span><span id="substLocs"><span class="annot"><span class="annottext">substLocs :: Map LocVar LocVar -&gt; [Ty2] -&gt; [Ty2]
</span><a href="Gibbon.NewL2.Syntax.html#substLocs"><span class="hs-identifier hs-var hs-var">substLocs</span></a></span></span><span> </span><span id="local-6989586621680938220"><span class="annot"><span class="annottext">Map LocVar LocVar
</span><a href="#local-6989586621680938220"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span id="local-6989586621680938221"><span class="annot"><span class="annottext">[Ty2]
</span><a href="#local-6989586621680938221"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ty2 -&gt; Ty2) -&gt; [Ty2] -&gt; [Ty2]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map LocVar LocVar -&gt; Ty2 -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier hs-var">substLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar LocVar
</span><a href="#local-6989586621680938220"><span class="hs-identifier hs-var">mp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Ty2]
</span><a href="#local-6989586621680938221"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-comment">-- | Extend an environment for a pattern match. E.g.</span><span>
</span><span id="line-237"></span><span class="hs-comment">--</span><span>
</span><span id="line-238"></span><span class="hs-comment">--     data Foo = MkFoo Int Foo | ...</span><span>
</span><span id="line-239"></span><span class="hs-comment">--</span><span>
</span><span id="line-240"></span><span class="hs-comment">--     case foo1 of</span><span>
</span><span id="line-241"></span><span class="hs-comment">--        MkFoo (i:loc1) (f:loc2) -&gt;</span><span>
</span><span id="line-242"></span><span class="hs-comment">--          new_env2 = extendPatternMatchEnv [loc1,loc2] old_env2</span><span>
</span><span id="line-243"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#extendPatternMatchEnv"><span class="hs-identifier hs-type">extendPatternMatchEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DDefs"><span class="hs-identifier hs-type">DDefs</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Env2"><span class="hs-identifier hs-type">Env2</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Env2"><span class="hs-identifier hs-type">Env2</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span>
</span><span id="line-245"></span><span id="extendPatternMatchEnv"><span class="annot"><span class="annottext">extendPatternMatchEnv :: HasCallStack =&gt;
String -&gt; DDefs Ty2 -&gt; [LocVar] -&gt; [LocVar] -&gt; Env2 Ty2 -&gt; Env2 Ty2
</span><a href="Gibbon.NewL2.Syntax.html#extendPatternMatchEnv"><span class="hs-identifier hs-var hs-var">extendPatternMatchEnv</span></a></span></span><span> </span><span id="local-6989586621680938241"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938241"><span class="hs-identifier hs-var">dcon</span></a></span></span><span> </span><span id="local-6989586621680938242"><span class="annot"><span class="annottext">DDefs Ty2
</span><a href="#local-6989586621680938242"><span class="hs-identifier hs-var">ddefs</span></a></span></span><span> </span><span id="local-6989586621680938243"><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938243"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621680938244"><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938244"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680938245"><span class="annot"><span class="annottext">Env2 Ty2
</span><a href="#local-6989586621680938245"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680938246"><span class="annot"><span class="annottext">tys :: [Ty2]
</span><a href="#local-6989586621680938246"><span class="hs-identifier hs-var hs-var">tys</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DDefs Ty2 -&gt; String -&gt; [Ty2]
forall a. Out a =&gt; DDefs a -&gt; String -&gt; [a]
</span><a href="Gibbon.Language.Syntax.html#lookupDataCon"><span class="hs-identifier hs-var">lookupDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs Ty2
</span><a href="#local-6989586621680938242"><span class="hs-identifier hs-var">ddefs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938241"><span class="hs-identifier hs-var">dcon</span></a></span><span>
</span><span id="line-247"></span><span>      </span><span id="local-6989586621680938248"><span class="annot"><span class="annottext">tys' :: [Ty2]
</span><a href="#local-6989586621680938248"><span class="hs-identifier hs-var hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((LocVar, Ty2) -&gt; [Ty2] -&gt; [Ty2])
-&gt; [Ty2] -&gt; [(LocVar, Ty2)] -&gt; [Ty2]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span>
</span><span id="line-248"></span><span>               </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680938250"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938250"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938251"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938251"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938252"><span class="annot"><span class="annottext">[Ty2]
</span><a href="#local-6989586621680938252"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-249"></span><span>                  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; [LocVar]
</span><a href="Gibbon.NewL2.Syntax.html#locsInTy"><span class="hs-identifier hs-var">locsInTy</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938251"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-250"></span><span>                    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938251"><span class="hs-identifier hs-var">ty</span></a></span><span class="annot"><span class="annottext">Ty2 -&gt; [Ty2] -&gt; [Ty2]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span class="annot"><span class="annottext">[Ty2]
</span><a href="#local-6989586621680938252"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-251"></span><span>                    </span><span class="hs-special">[</span><span id="local-6989586621680938253"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938253"><span class="hs-identifier hs-var">loc2</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map LocVar LocVar -&gt; Ty2 -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#substLoc"><span class="hs-identifier hs-var">substLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar -&gt; LocVar -&gt; Map LocVar LocVar
forall k a. k -&gt; a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#singleton"><span class="hs-identifier hs-var">M.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938253"><span class="hs-identifier hs-var">loc2</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938250"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938251"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; [Ty2] -&gt; [Ty2]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Ty2]
</span><a href="#local-6989586621680938252"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-252"></span><span>                    </span><span class="annot"><span class="annottext">[LocVar]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; [Ty2]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; [Ty2]) -&gt; String -&gt; [Ty2]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;extendPatternMatchEnv': Found more than 1 location in type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; String
forall a. Out a =&gt; a -&gt; String
</span><a href="Gibbon.Common.html#sdoc"><span class="hs-identifier hs-var">sdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938251"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>               </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-254"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocVar] -&gt; [Ty2] -&gt; [(LocVar, Ty2)]
forall a b.
(Show a, Show b, HasCallStack) =&gt;
[a] -&gt; [b] -&gt; [(a, b)]
</span><a href="Gibbon.Common.html#fragileZip"><span class="hs-identifier hs-var">fragileZip</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938244"><span class="hs-identifier hs-var">locs</span></a></span><span> </span><span class="annot"><span class="annottext">[Ty2]
</span><a href="#local-6989586621680938246"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Map LocVar Ty2 -&gt; Env2 Ty2 -&gt; Env2 Ty2
forall a. Map LocVar a -&gt; Env2 a -&gt; Env2 a
</span><a href="Gibbon.Language.Syntax.html#extendsVEnv"><span class="hs-identifier hs-var">extendsVEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LocVar, Ty2)] -&gt; Map LocVar Ty2
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#fromList"><span class="hs-identifier hs-var">M.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(LocVar, Ty2)] -&gt; Map LocVar Ty2)
-&gt; [(LocVar, Ty2)] -&gt; Map LocVar Ty2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [Ty2] -&gt; [(LocVar, Ty2)]
forall a b.
(Show a, Show b, HasCallStack) =&gt;
[a] -&gt; [b] -&gt; [(a, b)]
</span><a href="Gibbon.Common.html#fragileZip"><span class="hs-identifier hs-var">fragileZip</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938243"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[Ty2]
</span><a href="#local-6989586621680938248"><span class="hs-identifier hs-var">tys'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env2 Ty2
</span><a href="#local-6989586621680938245"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="annot"><span class="hs-comment">-- | Collect all the locations mentioned in a type.</span></span><span>
</span><span id="line-258"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#locsInTy"><span class="hs-identifier hs-type">locsInTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#LocVar"><span class="hs-identifier hs-type">LocVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-259"></span><span id="locsInTy"><span class="annot"><span class="annottext">locsInTy :: Ty2 -&gt; [LocVar]
</span><a href="Gibbon.NewL2.Syntax.html#locsInTy"><span class="hs-identifier hs-var hs-var">locsInTy</span></a></span></span><span> </span><span id="local-6989586621680938258"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938258"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938258"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-261"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PackedTy"><span class="hs-identifier hs-type">PackedTy</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938259"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938259"><span class="hs-identifier hs-var">lv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938259"><span class="hs-identifier hs-var">lv</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-262"></span><span>      </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProdTy"><span class="hs-identifier hs-type">ProdTy</span></a></span><span> </span><span id="local-6989586621680938260"><span class="annot"><span class="annottext">[UrTy LocVar]
</span><a href="#local-6989586621680938260"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; [LocVar]) -&gt; [UrTy LocVar] -&gt; [LocVar]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; [LocVar]
</span><a href="Gibbon.NewL2.Syntax.html#locsInTy"><span class="hs-identifier hs-var">locsInTy</span></a></span><span> </span><span class="annot"><span class="annottext">(Ty2 -&gt; [LocVar])
-&gt; (UrTy LocVar -&gt; Ty2) -&gt; UrTy LocVar -&gt; [LocVar]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; Ty2
</span><a href="Gibbon.NewL2.Syntax.html#MkTy2"><span class="hs-identifier hs-var">MkTy2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[UrTy LocVar]
</span><a href="#local-6989586621680938260"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-263"></span><span>      </span><span class="annot"><span class="annottext">UrTy LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-comment">-- Because L2 just adds a bit of metadata and enriched types, it is</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- possible to strip it back down to L1.</span><span>
</span><span id="line-267"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#revertToL1"><span class="hs-identifier hs-type">revertToL1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Prog2"><span class="hs-identifier hs-type">Prog2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Prog1"><span class="hs-identifier hs-type">Prog1</span></a></span><span>
</span><span id="line-268"></span><span id="revertToL1"><span class="annot"><span class="annottext">revertToL1 :: Prog2 -&gt; Prog1
</span><a href="Gibbon.NewL2.Syntax.html#revertToL1"><span class="hs-identifier hs-var hs-var">revertToL1</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span class="hs-special">{</span><span id="local-6989586621680938263"><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
ddefs :: DDefs (TyOf (E2 LocArg Ty2))
ddefs :: forall ex. Prog ex -&gt; DDefs (TyOf ex)
</span><a href="#local-6989586621680938263"><span class="hs-identifier hs-var hs-var">ddefs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938265"><span class="annot"><span class="annottext">FunDefs (E2 LocArg Ty2)
fundefs :: FunDefs (E2 LocArg Ty2)
fundefs :: forall ex. Prog ex -&gt; FunDefs ex
</span><a href="#local-6989586621680938265"><span class="hs-identifier hs-var hs-var">fundefs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938267"><span class="annot"><span class="annottext">Maybe (E2 LocArg Ty2, TyOf (E2 LocArg Ty2))
mainExp :: Maybe (E2 LocArg Ty2, TyOf (E2 LocArg Ty2))
mainExp :: forall ex. Prog ex -&gt; Maybe (ex, TyOf ex)
</span><a href="#local-6989586621680938267"><span class="hs-identifier hs-var hs-var">mainExp</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-269"></span><span>  </span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
-&gt; FunDefs Exp1 -&gt; Maybe (Exp1, TyOf Exp1) -&gt; Prog1
forall ex.
DDefs (TyOf ex) -&gt; FunDefs ex -&gt; Maybe (ex, TyOf ex) -&gt; Prog ex
</span><a href="Gibbon.Language.Syntax.html#Prog"><span class="hs-identifier hs-var">Prog</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf Exp1)
Map LocVar (DDef (UrTy ()))
</span><a href="#local-6989586621680938269"><span class="hs-identifier hs-var">ddefs'</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs Exp1
</span><a href="#local-6989586621680938270"><span class="hs-identifier hs-var">funefs'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, TyOf Exp1)
Maybe (Exp1, UrTy ())
</span><a href="#local-6989586621680938271"><span class="hs-identifier hs-var">mainExp'</span></a></span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>    </span><span id="local-6989586621680938269"><span class="annot"><span class="annottext">ddefs' :: Map LocVar (DDef (UrTy ()))
</span><a href="#local-6989586621680938269"><span class="hs-identifier hs-var hs-var">ddefs'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DDef Ty2 -&gt; DDef (UrTy ()))
-&gt; DDefs Ty2 -&gt; Map LocVar (DDef (UrTy ()))
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#map"><span class="hs-identifier hs-var">M.map</span></a></span><span> </span><span class="annot"><span class="annottext">DDef Ty2 -&gt; DDef (UrTy ())
</span><a href="Gibbon.NewL2.Syntax.html#revertDDef"><span class="hs-identifier hs-var">revertDDef</span></a></span><span> </span><span class="annot"><span class="annottext">DDefs (TyOf (E2 LocArg Ty2))
DDefs Ty2
</span><a href="#local-6989586621680938263"><span class="hs-identifier hs-var">ddefs</span></a></span><span>
</span><span id="line-272"></span><span>    </span><span id="local-6989586621680938270"><span class="annot"><span class="annottext">funefs' :: FunDefs Exp1
</span><a href="#local-6989586621680938270"><span class="hs-identifier hs-var hs-var">funefs'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunDef2 -&gt; FunDef1) -&gt; FunDefs (E2 LocArg Ty2) -&gt; FunDefs Exp1
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#map"><span class="hs-identifier hs-var">M.map</span></a></span><span> </span><span class="annot"><span class="annottext">FunDef2 -&gt; FunDef1
</span><a href="Gibbon.NewL2.Syntax.html#revertFunDef"><span class="hs-identifier hs-var">revertFunDef</span></a></span><span> </span><span class="annot"><span class="annottext">FunDefs (E2 LocArg Ty2)
</span><a href="#local-6989586621680938265"><span class="hs-identifier hs-var">fundefs</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621680938271"><span class="annot"><span class="annottext">mainExp' :: Maybe (Exp1, UrTy ())
</span><a href="#local-6989586621680938271"><span class="hs-identifier hs-var hs-var">mainExp'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (E2 LocArg Ty2, TyOf (E2 LocArg Ty2))
</span><a href="#local-6989586621680938267"><span class="hs-identifier hs-var">mainExp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-274"></span><span>                </span><span class="annot"><span class="annottext">Maybe (E2 LocArg Ty2, TyOf (E2 LocArg Ty2))
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Exp1, UrTy ())
forall a. Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-275"></span><span>                </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938275"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938275"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938276"><span class="annot"><span class="annottext">TyOf (E2 LocArg Ty2)
</span><a href="#local-6989586621680938276"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Exp1, UrTy ()) -&gt; Maybe (Exp1, UrTy ())
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938275"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">TyOf (E2 LocArg Ty2)
Ty2
</span><a href="#local-6989586621680938276"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#revertDDef"><span class="hs-identifier hs-type">revertDDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DDef"><span class="hs-identifier hs-type">DDef</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DDef"><span class="hs-identifier hs-type">DDef</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Ty1"><span class="hs-identifier hs-type">Ty1</span></a></span><span>
</span><span id="line-278"></span><span id="revertDDef"><span class="annot"><span class="annottext">revertDDef :: DDef Ty2 -&gt; DDef (UrTy ())
</span><a href="Gibbon.NewL2.Syntax.html#revertDDef"><span class="hs-identifier hs-var hs-var">revertDDef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#DDef"><span class="hs-identifier hs-type">DDef</span></a></span><span> </span><span id="local-6989586621680938280"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938280"><span class="hs-identifier hs-var">tyargs</span></a></span></span><span> </span><span id="local-6989586621680938281"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621680938281"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938282"><span class="annot"><span class="annottext">[(String, [(Bool, Ty2)])]
</span><a href="#local-6989586621680938282"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>  </span><span class="annot"><span class="annottext">LocVar
-&gt; [TyVar] -&gt; [(String, [(Bool, UrTy ())])] -&gt; DDef (UrTy ())
forall a. LocVar -&gt; [TyVar] -&gt; [(String, [(Bool, a)])] -&gt; DDef a
</span><a href="Gibbon.Language.Syntax.html#DDef"><span class="hs-identifier hs-var">DDef</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938280"><span class="hs-identifier hs-var">tyargs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621680938281"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((String, [(Bool, UrTy ())]) -&gt; Bool)
-&gt; [(String, [(Bool, UrTy ())])] -&gt; [(String, [(Bool, UrTy ())])]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#filter"><span class="hs-identifier hs-var">L.filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680938283"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938283"><span class="hs-identifier hs-var">dcon</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(Bool, UrTy ())]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="Gibbon.Language.Constants.html#isIndirectionTag"><span class="hs-identifier hs-var">isIndirectionTag</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938283"><span class="hs-identifier hs-var">dcon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(String, [(Bool, UrTy ())])] -&gt; [(String, [(Bool, UrTy ())])])
-&gt; [(String, [(Bool, UrTy ())])] -&gt; [(String, [(Bool, UrTy ())])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-281"></span><span>         </span><span class="annot"><span class="annottext">((String, [(Bool, Ty2)]) -&gt; (String, [(Bool, UrTy ())]))
-&gt; [(String, [(Bool, Ty2)])] -&gt; [(String, [(Bool, UrTy ())])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680938286"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938286"><span class="hs-identifier hs-var">dcon</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938287"><span class="annot"><span class="annottext">[(Bool, Ty2)]
</span><a href="#local-6989586621680938287"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938286"><span class="hs-identifier hs-var">dcon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">((Bool, Ty2) -&gt; (Bool, UrTy ()))
-&gt; [(Bool, Ty2)] -&gt; [(Bool, UrTy ())]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680938288"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680938288"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938289"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938289"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680938288"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938289"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Bool, Ty2)]
</span><a href="#local-6989586621680938287"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(String, [(Bool, Ty2)])]
</span><a href="#local-6989586621680938282"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#revertFunDef"><span class="hs-identifier hs-type">revertFunDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#FunDef2"><span class="hs-identifier hs-type">FunDef2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#FunDef1"><span class="hs-identifier hs-type">FunDef1</span></a></span><span>
</span><span id="line-284"></span><span id="revertFunDef"><span class="annot"><span class="annottext">revertFunDef :: FunDef2 -&gt; FunDef1
</span><a href="Gibbon.NewL2.Syntax.html#revertFunDef"><span class="hs-identifier hs-var hs-var">revertFunDef</span></a></span></span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDef"><span class="hs-identifier hs-type">FunDef</span></a></span><span class="hs-special">{</span><span id="local-6989586621680938291"><span class="annot"><span class="annottext">LocVar
funName :: LocVar
funName :: forall ex. FunDef ex -&gt; LocVar
</span><a href="#local-6989586621680938291"><span class="hs-identifier hs-var hs-var">funName</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938293"><span class="annot"><span class="annottext">[LocVar]
funArgs :: [LocVar]
funArgs :: forall ex. FunDef ex -&gt; [LocVar]
</span><a href="#local-6989586621680938293"><span class="hs-identifier hs-var hs-var">funArgs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938295"><span class="annot"><span class="annottext">ArrowTy (TyOf (E2 LocArg Ty2))
funTy :: ArrowTy (TyOf (E2 LocArg Ty2))
funTy :: forall ex. FunDef ex -&gt; ArrowTy (TyOf ex)
</span><a href="#local-6989586621680938295"><span class="hs-identifier hs-var hs-var">funTy</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938297"><span class="annot"><span class="annottext">E2 LocArg Ty2
funBody :: E2 LocArg Ty2
funBody :: forall ex. FunDef ex -&gt; ex
</span><a href="#local-6989586621680938297"><span class="hs-identifier hs-var hs-var">funBody</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938299"><span class="annot"><span class="annottext">FunMeta
funMeta :: FunMeta
funMeta :: forall ex. FunDef ex -&gt; FunMeta
</span><a href="#local-6989586621680938299"><span class="hs-identifier hs-var hs-var">funMeta</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FunDef"><span class="hs-identifier hs-type">FunDef</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">funName :: LocVar
</span><a href="Gibbon.Language.Syntax.html#funName"><span class="hs-identifier hs-var">funName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938291"><span class="hs-identifier hs-var">funName</span></a></span><span>
</span><span id="line-286"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">funArgs :: [LocVar]
</span><a href="Gibbon.Language.Syntax.html#funArgs"><span class="hs-identifier hs-var">funArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938293"><span class="hs-identifier hs-var">funArgs</span></a></span><span>
</span><span id="line-287"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">funTy :: ArrowTy (TyOf Exp1)
</span><a href="Gibbon.Language.Syntax.html#funTy"><span class="hs-identifier hs-var">funTy</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Ty2 -&gt; UrTy ()) -&gt; [Ty2] -&gt; [UrTy ()]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; UrTy ()) -&gt; (Ty2 -&gt; UrTy LocVar) -&gt; Ty2 -&gt; UrTy ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArrowTy2 Ty2 -&gt; [Ty2]
forall ty2. ArrowTy2 ty2 -&gt; [ty2]
</span><a href="Gibbon.L2.Syntax.html#arrIns"><span class="hs-identifier hs-var">Old.arrIns</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowTy (TyOf (E2 LocArg Ty2))
ArrowTy2 Ty2
</span><a href="#local-6989586621680938295"><span class="hs-identifier hs-var">funTy</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArrowTy2 Ty2 -&gt; Ty2
forall ty2. ArrowTy2 ty2 -&gt; ty2
</span><a href="Gibbon.L2.Syntax.html#arrOut"><span class="hs-identifier hs-var">Old.arrOut</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowTy (TyOf (E2 LocArg Ty2))
ArrowTy2 Ty2
</span><a href="#local-6989586621680938295"><span class="hs-identifier hs-var">funTy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">funBody :: Exp1
</span><a href="Gibbon.Language.Syntax.html#funBody"><span class="hs-identifier hs-var">funBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938297"><span class="hs-identifier hs-var">funBody</span></a></span><span>
</span><span id="line-289"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">funMeta :: FunMeta
</span><a href="Gibbon.Language.Syntax.html#funMeta"><span class="hs-identifier hs-var">funMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunMeta
</span><a href="#local-6989586621680938299"><span class="hs-identifier hs-var">funMeta</span></a></span><span>
</span><span id="line-290"></span><span>         </span><span class="hs-special">}</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-type">revertExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Exp1"><span class="hs-identifier hs-type">Exp1</span></a></span><span>
</span><span id="line-293"></span><span id="revertExp"><span class="annot"><span class="annottext">revertExp :: E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var hs-var">revertExp</span></a></span></span><span> </span><span id="local-6989586621680938325"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938325"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938325"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-type">VarE</span></a></span><span> </span><span id="local-6989586621680938326"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938326"><span class="hs-identifier hs-var">v</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. LocVar -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-var">VarE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938326"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LitE"><span class="hs-identifier hs-type">LitE</span></a></span><span> </span><span id="local-6989586621680938327"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680938327"><span class="hs-identifier hs-var">n</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. Int -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LitE"><span class="hs-identifier hs-var">LitE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680938327"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CharE"><span class="hs-identifier hs-type">CharE</span></a></span><span> </span><span id="local-6989586621680938328"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680938328"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. Char -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#CharE"><span class="hs-identifier hs-var">CharE</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680938328"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-298"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FloatE"><span class="hs-identifier hs-type">FloatE</span></a></span><span> </span><span id="local-6989586621680938329"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680938329"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. Double -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#FloatE"><span class="hs-identifier hs-var">FloatE</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680938329"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-299"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LitSymE"><span class="hs-identifier hs-type">LitSymE</span></a></span><span> </span><span id="local-6989586621680938330"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938330"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. LocVar -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LitSymE"><span class="hs-identifier hs-var">LitSymE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938330"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-type">AppE</span></a></span><span> </span><span id="local-6989586621680938331"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938331"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938332"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938332"><span class="hs-identifier hs-var">args</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; [()] -&gt; [Exp1] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
LocVar -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-var">AppE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938331"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Exp1) -&gt; [E2 LocArg Ty2] -&gt; [Exp1]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938332"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span id="local-6989586621680938333"><span class="annot"><span class="annottext">Prim Ty2
</span><a href="#local-6989586621680938333"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621680938334"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938334"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Prim (UrTy ()) -&gt; [Exp1] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
Prim dec -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-var">PrimAppE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prim Ty2 -&gt; Prim (UrTy ())
</span><a href="#local-6989586621680938335"><span class="hs-identifier hs-var">revertPrim</span></a></span><span> </span><span class="annot"><span class="annottext">Prim Ty2
</span><a href="#local-6989586621680938333"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Exp1] -&gt; Exp1) -&gt; [Exp1] -&gt; Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Exp1) -&gt; [E2 LocArg Ty2] -&gt; [Exp1]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938334"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938336"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938336"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680938337"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938337"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.L2.Syntax.html#IndirectionE"><span class="hs-identifier hs-type">Old.IndirectionE</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(LocArg, LocArg)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(LocArg, LocArg)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938338"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938338"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938339"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938339"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-303"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PackedTy"><span class="hs-identifier hs-type">PackedTy</span></a></span><span> </span><span id="local-6989586621680938340"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938340"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938337"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-304"></span><span>          </span><span class="annot"><span class="annottext">(LocVar, [()], UrTy (), Exp1) -&gt; Exp1 -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
(LocVar, [loc], dec, PreExp ext loc dec)
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-var">LetE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938336"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938337"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; [()] -&gt; [Exp1] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
LocVar -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-var">AppE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; LocVar
</span><a href="Gibbon.Language.Constants.html#mkCopyFunName"><span class="hs-identifier hs-var">mkCopyFunName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938340"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938338"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938339"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938342"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938342"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621680938343"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938343"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938344"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938344"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938345"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938345"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-306"></span><span>      </span><span class="annot"><span class="annottext">(LocVar, [()], UrTy (), Exp1) -&gt; Exp1 -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
(LocVar, [loc], dec, PreExp ext loc dec)
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-var">LetE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938342"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938343"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938344"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938345"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-type">IfE</span></a></span><span> </span><span id="local-6989586621680938346"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938346"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938347"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938347"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680938348"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938348"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp1 -&gt; Exp1 -&gt; Exp1 -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; PreExp ext loc dec -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-var">IfE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938346"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938347"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938348"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-type">MkProdE</span></a></span><span> </span><span id="local-6989586621680938349"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938349"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Exp1] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
[PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-var">MkProdE</span></a></span><span> </span><span class="annot"><span class="annottext">([Exp1] -&gt; Exp1) -&gt; [Exp1] -&gt; Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Exp1) -&gt; [E2 LocArg Ty2] -&gt; [Exp1]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938349"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-309"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-type">ProjE</span></a></span><span> </span><span id="local-6989586621680938350"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680938350"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621680938351"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938351"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Exp1 -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
Int -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-var">ProjE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680938350"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938351"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span id="local-6989586621680938352"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938352"><span class="hs-identifier hs-var">scrt</span></a></span></span><span> </span><span id="local-6989586621680938353"><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938353"><span class="hs-identifier hs-var">brs</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp1 -&gt; [(String, [(LocVar, ())], Exp1)] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec
-&gt; [(String, [(LocVar, loc)], PreExp ext loc dec)]
-&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-var">CaseE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938352"><span class="hs-identifier hs-var">scrt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((String, [(LocVar, LocArg)], E2 LocArg Ty2)
 -&gt; (String, [(LocVar, ())], Exp1))
-&gt; [(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
-&gt; [(String, [(LocVar, ())], Exp1)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="annot"><span class="annottext">(String, [(LocVar, LocArg)], E2 LocArg Ty2)
-&gt; (String, [(LocVar, ())], Exp1)
</span><a href="#local-6989586621680938354"><span class="hs-identifier hs-var">docase</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938353"><span class="hs-identifier hs-var">brs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-type">DataConE</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938355"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938355"><span class="hs-identifier hs-var">dcon</span></a></span></span><span> </span><span id="local-6989586621680938356"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938356"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; String -&gt; [Exp1] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
loc -&gt; String -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-var">DataConE</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938355"><span class="hs-identifier hs-var">dcon</span></a></span><span> </span><span class="annot"><span class="annottext">([Exp1] -&gt; Exp1) -&gt; [Exp1] -&gt; Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Exp1) -&gt; [E2 LocArg Ty2] -&gt; [Exp1]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938356"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-type">TimeIt</span></a></span><span> </span><span id="local-6989586621680938357"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938357"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680938358"><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938358"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680938359"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680938359"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp1 -&gt; UrTy () -&gt; Bool -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
PreExp ext loc dec -&gt; dec -&gt; Bool -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-var">TimeIt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938357"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><a href="#local-6989586621680938358"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680938359"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-type">SpawnE</span></a></span><span> </span><span id="local-6989586621680938360"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938360"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938361"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938361"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; [()] -&gt; [Exp1] -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
LocVar -&gt; [loc] -&gt; [PreExp ext loc dec] -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-var">SpawnE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938360"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Exp1) -&gt; [E2 LocArg Ty2] -&gt; [Exp1]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938361"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="Gibbon.Language.Syntax.html#SyncE"><span class="hs-identifier hs-var">SyncE</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#SyncE"><span class="hs-identifier hs-var">SyncE</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-type">WithArenaE</span></a></span><span> </span><span id="local-6989586621680938362"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938362"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680938363"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938363"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Exp1 -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
LocVar -&gt; PreExp ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-var">WithArenaE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938362"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938363"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span id="local-6989586621680938364"><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938364"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-317"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938364"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-type">Old.LetRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938365"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938365"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938365"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-type">Old.LetParRegionE</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938366"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938366"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938366"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-320"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">Old.LetLocE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocExp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938367"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938367"><span class="hs-identifier hs-var">bod</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938367"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-321"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#TagCursor"><span class="hs-identifier hs-type">Old.TagCursor</span></a></span><span> </span><span id="local-6989586621680938368"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938368"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938369"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938369"><span class="hs-identifier hs-var">_b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E1Ext () (UrTy ()) -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar -&gt; E1Ext () (UrTy ())
forall loc dec. LocVar -&gt; E1Ext loc dec
</span><a href="Gibbon.L1.Syntax.html#StartOfPkdCursor"><span class="hs-identifier hs-var">L1.StartOfPkdCursor</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938368"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#StartOfPkdCursor"><span class="hs-identifier hs-type">Old.StartOfPkdCursor</span></a></span><span> </span><span id="local-6989586621680938370"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938370"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E1Ext () (UrTy ()) -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec.
ext loc dec -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-var">Ext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar -&gt; E1Ext () (UrTy ())
forall loc dec. LocVar -&gt; E1Ext loc dec
</span><a href="Gibbon.L1.Syntax.html#StartOfPkdCursor"><span class="hs-identifier hs-var">L1.StartOfPkdCursor</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938370"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#RetE"><span class="hs-identifier hs-type">Old.RetE</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938371"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938371"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. LocVar -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-var">VarE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938371"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-324"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AddFixed"><span class="hs-identifier hs-type">Old.AddFixed</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO AddFixed.&quot;</span></span><span>
</span><span id="line-325"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#FromEndE"><span class="hs-identifier hs-type">Old.FromEndE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO FromEndLE&quot;</span></span><span>
</span><span id="line-326"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#BoundsCheck"><span class="hs-identifier hs-type">Old.BoundsCheck</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO BoundsCheck&quot;</span></span><span>
</span><span id="line-327"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#IndirectionE"><span class="hs-identifier hs-type">Old.IndirectionE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO IndirectionE&quot;</span></span><span>
</span><span id="line-328"></span><span>        </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="Gibbon.L2.Syntax.html#GetCilkWorkerNum"><span class="hs-identifier hs-var">Old.GetCilkWorkerNum</span></a></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Exp1
forall (ext :: * -&gt; * -&gt; *) loc dec. Int -&gt; PreExp ext loc dec
</span><a href="Gibbon.Language.Syntax.html#LitE"><span class="hs-identifier hs-var">LitE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-329"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-type">Old.LetAvail</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938372"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938372"><span class="hs-identifier hs-var">bod</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938372"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-330"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateTagHere"><span class="hs-identifier hs-type">Old.AllocateTagHere</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO AddFixed.&quot;</span></span><span>
</span><span id="line-331"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateScalarsHere"><span class="hs-identifier hs-type">Old.AllocateScalarsHere</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO AddFixed.&quot;</span></span><span>
</span><span id="line-332"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPush"><span class="hs-identifier hs-type">Old.SSPush</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO SSPush.&quot;</span></span><span>
</span><span id="line-333"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPop"><span class="hs-identifier hs-type">Old.SSPop</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO SSPop.&quot;</span></span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MapE"><span class="hs-identifier hs-type">MapE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Exp1) -&gt; String -&gt; Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO MapE&quot;</span></span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FoldE"><span class="hs-identifier hs-type">FoldE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Exp1
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Exp1) -&gt; String -&gt; Exp1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;revertExp: TODO FoldE&quot;</span></span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-comment">-- Ugh .. this is bad. Can we remove the identity cases here ?</span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-comment">-- TODO: Get rid of this (and L3.toL3Prim) soon.</span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><a href="#local-6989586621680938335"><span class="hs-identifier hs-type">revertPrim</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Ty2"><span class="hs-identifier hs-type">Ty2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Ty1"><span class="hs-identifier hs-type">Ty1</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621680938335"><span class="annot"><span class="annottext">revertPrim :: Prim Ty2 -&gt; Prim (UrTy ())
</span><a href="#local-6989586621680938335"><span class="hs-identifier hs-var hs-var">revertPrim</span></a></span></span><span> </span><span id="local-6989586621680938373"><span class="annot"><span class="annottext">Prim Ty2
</span><a href="#local-6989586621680938373"><span class="hs-identifier hs-var">pr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ty2 -&gt; UrTy ()) -&gt; Prim Ty2 -&gt; Prim (UrTy ())
forall a b. (a -&gt; b) -&gt; Prim a -&gt; Prim b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UrTy LocVar -&gt; UrTy ()
forall a. UrTy a -&gt; UrTy ()
</span><a href="Gibbon.Language.html#stripTyLocs"><span class="hs-identifier hs-var">stripTyLocs</span></a></span><span> </span><span class="annot"><span class="annottext">(UrTy LocVar -&gt; UrTy ()) -&gt; (Ty2 -&gt; UrTy LocVar) -&gt; Ty2 -&gt; UrTy ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Ty2 -&gt; UrTy LocVar
</span><a href="Gibbon.NewL2.Syntax.html#unTy2"><span class="hs-identifier hs-var">unTy2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Prim Ty2
</span><a href="#local-6989586621680938373"><span class="hs-identifier hs-var">pr</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><a href="#local-6989586621680938354"><span class="hs-identifier hs-type">docase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">,</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.L1.Syntax.html#Exp1"><span class="hs-identifier hs-type">Exp1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>    </span><span id="local-6989586621680938354"><span class="annot"><span class="annottext">docase :: (String, [(LocVar, LocArg)], E2 LocArg Ty2)
-&gt; (String, [(LocVar, ())], Exp1)
</span><a href="#local-6989586621680938354"><span class="hs-identifier hs-var hs-var">docase</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938374"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938374"><span class="hs-identifier hs-var">dcon</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938375"><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938375"><span class="hs-identifier hs-var">vlocargs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938376"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938376"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-344"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938377"><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938377"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)] -&gt; ([LocVar], [LocArg])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938375"><span class="hs-identifier hs-var">vlocargs</span></a></span><span>
</span><span id="line-345"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680938374"><span class="hs-identifier hs-var">dcon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [()] -&gt; [(LocVar, ())]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938377"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; [()]
forall a. a -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#repeat"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Exp1
</span><a href="Gibbon.NewL2.Syntax.html#revertExp"><span class="hs-identifier hs-var">revertExp</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938376"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="annot"><span class="hs-comment">-- | Build a dependency list which can be later converted to a graph</span></span><span>
</span><span id="line-349"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#depList"><span class="hs-identifier hs-type">depList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- The helper function, go, works with a map rather than list so that all</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- dependencies are properly grouped, without any duplicate keys. But we</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- convert it back to a list so that we can hand it off to 'graphFromEdges'.</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- Reversing the list makes it easy to peek at the return value of this AST later.</span><span>
</span><span id="line-354"></span><span id="depList"><span class="annot"><span class="annottext">depList :: E2 LocArg Ty2 -&gt; [(LocVar, LocVar, [LocVar])]
</span><a href="Gibbon.NewL2.Syntax.html#depList"><span class="hs-identifier hs-var hs-var">depList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((LocVar, [LocVar]) -&gt; (LocVar, LocVar, [LocVar]))
-&gt; [(LocVar, [LocVar])] -&gt; [(LocVar, LocVar, [LocVar])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">L.map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680938397"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938397"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938398"><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938398"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938397"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938397"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938398"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(LocVar, [LocVar])] -&gt; [(LocVar, LocVar, [LocVar])])
-&gt; (E2 LocArg Ty2 -&gt; [(LocVar, [LocVar])])
-&gt; E2 LocArg Ty2
-&gt; [(LocVar, LocVar, [LocVar])]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; [(LocVar, [LocVar])]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">M.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Map LocVar [LocVar] -&gt; [(LocVar, [LocVar])])
-&gt; (E2 LocArg Ty2 -&gt; Map LocVar [LocVar])
-&gt; E2 LocArg Ty2
-&gt; [(LocVar, [LocVar])]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
forall k a. Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">M.empty</span></a></span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-356"></span><span>      </span><span class="annot"><a href="#local-6989586621680938400"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-357"></span><span>      </span><span id="local-6989586621680938400"><span class="annot"><span class="annottext">go :: Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621680938402"><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621680938403"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938403"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-358"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938403"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-359"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-type">VarE</span></a></span><span> </span><span id="local-6989586621680938404"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938404"><span class="hs-identifier hs-var">v</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938404"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938404"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-360"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LitE"><span class="hs-identifier hs-type">LitE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-361"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CharE"><span class="hs-identifier hs-type">CharE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-362"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FloatE"><span class="hs-identifier hs-type">FloatE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-363"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LitSymE"><span class="hs-identifier hs-type">LitSymE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-364"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-type">AppE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938406"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938406"><span class="hs-identifier hs-var">args</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar] -&gt; [E2 LocArg Ty2] -&gt; Map LocVar [LocVar]
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938406"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-365"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span class="annot"><span class="annottext">Prim Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938408"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938408"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar] -&gt; [E2 LocArg Ty2] -&gt; Map LocVar [LocVar]
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938408"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-366"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938409"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938409"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Ty2
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621680938410"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938410"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938411"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938411"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-367"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680938412"><span class="annot"><span class="annottext">acc_rhs :: Map LocVar [LocVar]
</span><a href="#local-6989586621680938412"><span class="hs-identifier hs-var hs-var">acc_rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938410"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-368"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938409"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set LocVar -&gt; [LocVar]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">S.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Set LocVar -&gt; [LocVar]) -&gt; Set LocVar -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938410"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938412"><span class="hs-identifier hs-var">acc_rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938411"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-369"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-type">IfE</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938414"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938414"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680938415"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938415"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938414"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938415"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-370"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-type">MkProdE</span></a></span><span> </span><span id="local-6989586621680938416"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938416"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar] -&gt; [E2 LocArg Ty2] -&gt; Map LocVar [LocVar]
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938416"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-371"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-type">ProjE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938417"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938417"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938417"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-372"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Gibbon.Language.Syntax.html#VarE"><span class="hs-identifier hs-type">VarE</span></a></span><span> </span><span id="local-6989586621680938418"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938418"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938419"><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938419"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-373"></span><span>            </span><span class="annot"><span class="annottext">((String, [(LocVar, LocArg)], E2 LocArg Ty2)
 -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar]
-&gt; [(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
-&gt; Map LocVar [LocVar]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">L.foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621680938420"><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938420"><span class="hs-identifier hs-var">vlocs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938421"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938421"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938422"><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938422"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-374"></span><span>                       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938423"><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938423"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938424"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938424"><span class="hs-identifier hs-var">locs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)] -&gt; ([LocVar], [LocArg])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938420"><span class="hs-identifier hs-var">vlocs</span></a></span><span>
</span><span id="line-375"></span><span>                           </span><span id="local-6989586621680938425"><span class="annot"><span class="annottext">acc'' :: Map LocVar [LocVar]
</span><a href="#local-6989586621680938425"><span class="hs-identifier hs-var hs-var">acc''</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocVar -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar] -&gt; [LocVar] -&gt; Map LocVar [LocVar]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">L.foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680938426"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938426"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621680938427"><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938427"><span class="hs-identifier hs-var">acc'''</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938418"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938426"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938427"><span class="hs-identifier hs-var">acc'''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>                                           </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938422"><span class="hs-identifier hs-var">acc'</span></a></span><span>
</span><span id="line-377"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938423"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938424"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>                       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938425"><span class="hs-identifier hs-var">acc''</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938421"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>                    </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-380"></span><span>                    </span><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938419"><span class="hs-identifier hs-var">mp</span></a></span><span>
</span><span id="line-381"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span id="local-6989586621680938428"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938428"><span class="hs-identifier hs-var">_scrt</span></a></span></span><span> </span><span id="local-6989586621680938429"><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938429"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((String, [(LocVar, LocArg)], E2 LocArg Ty2)
 -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar]
-&gt; [(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
-&gt; Map LocVar [LocVar]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">L.foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621680938430"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938430"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938431"><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938431"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938431"><span class="hs-identifier hs-var">acc'</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938430"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938429"><span class="hs-identifier hs-var">mp</span></a></span><span>
</span><span id="line-382"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-type">DataConE</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938432"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938432"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar] -&gt; [E2 LocArg Ty2] -&gt; Map LocVar [LocVar]
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938432"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-383"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-type">TimeIt</span></a></span><span> </span><span id="local-6989586621680938433"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938433"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938433"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-384"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-type">WithArenaE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938434"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938434"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938434"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-385"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-type">SpawnE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938435"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938435"><span class="hs-identifier hs-var">ls</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar])
-&gt; Map LocVar [LocVar] -&gt; [E2 LocArg Ty2] -&gt; Map LocVar [LocVar]
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Foldable.html#foldl"><span class="hs-identifier hs-var">foldl</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938435"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-386"></span><span>          </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="Gibbon.Language.Syntax.html#SyncE"><span class="hs-identifier hs-var">SyncE</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-387"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MapE"><span class="hs-identifier hs-type">MapE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-388"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#FoldE"><span class="hs-identifier hs-type">FoldE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-389"></span><span>          </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span id="local-6989586621680938436"><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938436"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-390"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938436"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-391"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-type">Old.LetRegionE</span></a></span><span> </span><span id="local-6989586621680938437"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938437"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938438"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938438"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-392"></span><span>                </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938437"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set LocVar -&gt; [LocVar]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">S.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Set LocVar -&gt; [LocVar]) -&gt; Set LocVar -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938438"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938438"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-393"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-type">Old.LetParRegionE</span></a></span><span> </span><span id="local-6989586621680938439"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938439"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938440"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938440"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-394"></span><span>                </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938439"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set LocVar -&gt; [LocVar]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">S.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Set LocVar -&gt; [LocVar]) -&gt; Set LocVar -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938440"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938440"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-395"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">Old.LetLocE</span></a></span><span> </span><span id="local-6989586621680938441"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938441"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680938442"><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680938442"><span class="hs-identifier hs-var">phs</span></a></span></span><span> </span><span id="local-6989586621680938443"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938443"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-396"></span><span>                </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938441"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocExp -&gt; [LocVar]
</span><a href="#local-6989586621680938444"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680938442"><span class="hs-identifier hs-var">phs</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set LocVar -&gt; [LocVar]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">S.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Set LocVar -&gt; [LocVar]) -&gt; Set LocVar -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938443"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938443"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-397"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#RetE"><span class="hs-identifier hs-type">Old.RetE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-398"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#FromEndE"><span class="hs-identifier hs-type">Old.FromEndE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-399"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#BoundsCheck"><span class="hs-identifier hs-type">Old.BoundsCheck</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-400"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#IndirectionE"><span class="hs-identifier hs-type">Old.IndirectionE</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-401"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AddFixed"><span class="hs-identifier hs-type">Old.AddFixed</span></a></span><span> </span><span id="local-6989586621680938445"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938445"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938445"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938445"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-402"></span><span>              </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="Gibbon.L2.Syntax.html#GetCilkWorkerNum"><span class="hs-identifier hs-var">Old.GetCilkWorkerNum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-403"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-type">Old.LetAvail</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938446"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938446"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar] -&gt; E2 LocArg Ty2 -&gt; Map LocVar [LocVar]
</span><a href="#local-6989586621680938400"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938446"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-404"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateTagHere"><span class="hs-identifier hs-type">Old.AllocateTagHere</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-405"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateScalarsHere"><span class="hs-identifier hs-type">Old.AllocateScalarsHere</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-406"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPush"><span class="hs-identifier hs-type">Old.SSPush</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-407"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPop"><span class="hs-identifier hs-type">Old.SSPop</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-408"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#StartOfPkdCursor"><span class="hs-identifier hs-type">Old.StartOfPkdCursor</span></a></span><span> </span><span id="local-6989586621680938447"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938447"><span class="hs-identifier hs-var">cur</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938447"><span class="hs-identifier hs-var">cur</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938447"><span class="hs-identifier hs-var">cur</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-409"></span><span>              </span><span class="annot"><a href="Gibbon.L2.Syntax.html#TagCursor"><span class="hs-identifier hs-type">Old.TagCursor</span></a></span><span> </span><span id="local-6989586621680938448"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938448"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938449"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938449"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938449"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938449"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([LocVar] -&gt; [LocVar] -&gt; [LocVar])
-&gt; LocVar -&gt; [LocVar] -&gt; Map LocVar [LocVar] -&gt; Map LocVar [LocVar]
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insertWith"><span class="hs-identifier hs-var">M.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; [LocVar] -&gt; [LocVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938448"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938448"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map LocVar [LocVar]
</span><a href="#local-6989586621680938402"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span>      </span><span class="annot"><a href="#local-6989586621680938444"><span class="hs-identifier hs-type">dep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.L2.Syntax.html#PreLocExp"><span class="hs-identifier hs-type">Old.PreLocExp</span></a></span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#LocArg"><span class="hs-identifier hs-type">LocArg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-412"></span><span>      </span><span id="local-6989586621680938444"><span class="annot"><span class="annottext">dep :: LocExp -&gt; [LocVar]
</span><a href="#local-6989586621680938444"><span class="hs-identifier hs-var hs-var">dep</span></a></span></span><span> </span><span id="local-6989586621680938450"><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680938450"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-413"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680938450"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-414"></span><span>          </span><span class="annot"><a href="Gibbon.L2.Syntax.html#StartOfRegionLE"><span class="hs-identifier hs-type">Old.StartOfRegionLE</span></a></span><span> </span><span id="local-6989586621680938452"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938452"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938452"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-415"></span><span>          </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AfterConstantLE"><span class="hs-identifier hs-type">Old.AfterConstantLE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938453"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938453"><span class="hs-identifier hs-var">loc</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938453"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-416"></span><span>          </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AfterVariableLE"><span class="hs-identifier hs-type">Old.AfterVariableLE</span></a></span><span> </span><span id="local-6989586621680938454"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938454"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680938455"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938455"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938454"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938455"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-417"></span><span>          </span><span class="annot"><a href="Gibbon.L2.Syntax.html#InRegionLE"><span class="hs-identifier hs-type">Old.InRegionLE</span></a></span><span> </span><span id="local-6989586621680938457"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938457"><span class="hs-identifier hs-var">r</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938457"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-418"></span><span>          </span><span class="annot"><a href="Gibbon.L2.Syntax.html#FromEndLE"><span class="hs-identifier hs-type">Old.FromEndLE</span></a></span><span> </span><span id="local-6989586621680938459"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938459"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938459"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-419"></span><span>          </span><span class="annot"><span class="annottext">LocExp
</span><a href="Gibbon.L2.Syntax.html#FreeLE"><span class="hs-identifier hs-var">Old.FreeLE</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-comment">-- gFreeVars ++ locations ++ region variables</span><span>
</span><span id="line-422"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-type">allFreeVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">S.Set</span></a></span><span> </span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-423"></span><span id="allFreeVars"><span class="annot"><span class="annottext">allFreeVars :: E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var hs-var">allFreeVars</span></a></span></span><span> </span><span id="local-6989586621680938508"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938508"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938508"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-425"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#AppE"><span class="hs-identifier hs-type">AppE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938509"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938509"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680938510"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938510"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938509"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Set LocVar] -&gt; Set LocVar
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#unions"><span class="hs-identifier hs-var">S.unions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Set LocVar) -&gt; [E2 LocArg Ty2] -&gt; [Set LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938510"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#PrimAppE"><span class="hs-identifier hs-type">PrimAppE</span></a></span><span> </span><span class="annot"><span class="annottext">Prim Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938513"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938513"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Set LocVar] -&gt; Set LocVar
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#unions"><span class="hs-identifier hs-var">S.unions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Set LocVar) -&gt; [E2 LocArg Ty2] -&gt; [Set LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938513"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#LetE"><span class="hs-identifier hs-type">LetE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938514"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938514"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938515"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938515"><span class="hs-identifier hs-var">locs</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Ty2
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621680938516"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938516"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938517"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938517"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938515"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938516"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938517"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>                               </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#difference"><span class="hs-operator hs-var">`S.difference`</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938514"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-429"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#IfE"><span class="hs-identifier hs-type">IfE</span></a></span><span> </span><span id="local-6989586621680938519"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938519"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938520"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938520"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680938521"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938521"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938519"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938520"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938521"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-430"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#MkProdE"><span class="hs-identifier hs-type">MkProdE</span></a></span><span> </span><span id="local-6989586621680938522"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938522"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Set LocVar] -&gt; Set LocVar
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#unions"><span class="hs-identifier hs-var">S.unions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Set LocVar) -&gt; [E2 LocArg Ty2] -&gt; [Set LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938522"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#ProjE"><span class="hs-identifier hs-type">ProjE</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938523"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938523"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938523"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-432"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#CaseE"><span class="hs-identifier hs-type">CaseE</span></a></span><span> </span><span id="local-6989586621680938524"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938524"><span class="hs-identifier hs-var">scrt</span></a></span></span><span> </span><span id="local-6989586621680938525"><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938525"><span class="hs-identifier hs-var">brs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938524"><span class="hs-identifier hs-var">scrt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Set LocVar] -&gt; Set LocVar
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#unions"><span class="hs-identifier hs-var">S.unions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((String, [(LocVar, LocArg)], E2 LocArg Ty2) -&gt; Set LocVar)
-&gt; [(String, [(LocVar, LocArg)], E2 LocArg Ty2)] -&gt; [Set LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621680938526"><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938526"><span class="hs-identifier hs-var">vlocs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938527"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938527"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938527"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#difference"><span class="hs-operator hs-var">`S.difference`</span></a></span><span>
</span><span id="line-433"></span><span>                                                                                   </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((LocVar, LocArg) -&gt; LocVar) -&gt; [(LocVar, LocArg)] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(LocVar, LocArg) -&gt; LocVar
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938526"><span class="hs-identifier hs-var">vlocs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#difference"><span class="hs-operator hs-var">`S.difference`</span></a></span><span>
</span><span id="line-434"></span><span>                                                                                   </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((LocVar, LocArg) -&gt; LocVar) -&gt; [(LocVar, LocArg)] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar)
-&gt; ((LocVar, LocArg) -&gt; LocArg) -&gt; (LocVar, LocArg) -&gt; LocVar
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(LocVar, LocArg) -&gt; LocArg
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(LocVar, LocArg)]
</span><a href="#local-6989586621680938526"><span class="hs-identifier hs-var">vlocs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>                                                                  </span><span class="annot"><span class="annottext">[(String, [(LocVar, LocArg)], E2 LocArg Ty2)]
</span><a href="#local-6989586621680938525"><span class="hs-identifier hs-var">brs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#DataConE"><span class="hs-identifier hs-type">DataConE</span></a></span><span> </span><span id="local-6989586621680938530"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938530"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938531"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938531"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938530"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Set LocVar] -&gt; Set LocVar
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#unions"><span class="hs-identifier hs-var">S.unions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Set LocVar) -&gt; [E2 LocArg Ty2] -&gt; [Set LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938531"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#TimeIt"><span class="hs-identifier hs-type">TimeIt</span></a></span><span> </span><span id="local-6989586621680938532"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938532"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938532"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-438"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#WithArenaE"><span class="hs-identifier hs-type">WithArenaE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938533"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938533"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938533"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-439"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#SpawnE"><span class="hs-identifier hs-type">SpawnE</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938534"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938534"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680938535"><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938535"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938534"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Set LocVar] -&gt; Set LocVar
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#unions"><span class="hs-identifier hs-var">S.unions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(E2 LocArg Ty2 -&gt; Set LocVar) -&gt; [E2 LocArg Ty2] -&gt; [Set LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">[E2 LocArg Ty2]
</span><a href="#local-6989586621680938535"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>    </span><span class="annot"><a href="Gibbon.Language.Syntax.html#Ext"><span class="hs-identifier hs-type">Ext</span></a></span><span> </span><span id="local-6989586621680938536"><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938536"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-441"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="#local-6989586621680938536"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-442"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetRegionE"><span class="hs-identifier hs-type">Old.LetRegionE</span></a></span><span> </span><span id="local-6989586621680938537"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938537"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938538"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938538"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#delete"><span class="hs-identifier hs-var">S.delete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938537"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938538"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetParRegionE"><span class="hs-identifier hs-type">Old.LetParRegionE</span></a></span><span> </span><span id="local-6989586621680938540"><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938540"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">RegionSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RegionType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938541"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938541"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#delete"><span class="hs-identifier hs-var">S.delete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Region -&gt; LocVar
</span><a href="Gibbon.L2.Syntax.html#regionToVar"><span class="hs-identifier hs-var">Old.regionToVar</span></a></span><span> </span><span class="annot"><span class="annottext">Region
</span><a href="#local-6989586621680938540"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938541"><span class="hs-identifier hs-var">bod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetLocE"><span class="hs-identifier hs-type">Old.LetLocE</span></a></span><span> </span><span id="local-6989586621680938542"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938542"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680938543"><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680938543"><span class="hs-identifier hs-var">locexp</span></a></span></span><span> </span><span id="local-6989586621680938544"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938544"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#delete"><span class="hs-identifier hs-var">S.delete</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938542"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938544"><span class="hs-identifier hs-var">bod</span></a></span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="annot"><span class="annottext">LocExp -&gt; Set LocVar
forall a. FreeVars a =&gt; a -&gt; Set LocVar
</span><a href="Gibbon.Language.Syntax.html#gFreeVars"><span class="hs-identifier hs-var">gFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">LocExp
</span><a href="#local-6989586621680938543"><span class="hs-identifier hs-var">locexp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#StartOfPkdCursor"><span class="hs-identifier hs-type">Old.StartOfPkdCursor</span></a></span><span> </span><span id="local-6989586621680938545"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938545"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938545"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-446"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#TagCursor"><span class="hs-identifier hs-type">Old.TagCursor</span></a></span><span> </span><span id="local-6989586621680938546"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938546"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938547"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938547"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938546"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938547"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-447"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#RetE"><span class="hs-identifier hs-type">Old.RetE</span></a></span><span> </span><span id="local-6989586621680938548"><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938548"><span class="hs-identifier hs-var">locs</span></a></span></span><span> </span><span id="local-6989586621680938549"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938549"><span class="hs-identifier hs-var">v</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#insert"><span class="hs-identifier hs-var">S.insert</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938549"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">[LocArg]
</span><a href="#local-6989586621680938548"><span class="hs-identifier hs-var">locs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#FromEndE"><span class="hs-identifier hs-type">Old.FromEndE</span></a></span><span> </span><span id="local-6989586621680938551"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938551"><span class="hs-identifier hs-var">loc</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938551"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#BoundsCheck"><span class="hs-identifier hs-type">Old.BoundsCheck</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938552"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938552"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680938553"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938553"><span class="hs-identifier hs-var">cur</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocArg -&gt; LocVar) -&gt; [LocArg] -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938552"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938553"><span class="hs-identifier hs-var">cur</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#IndirectionE"><span class="hs-identifier hs-type">Old.IndirectionE</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938554"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938554"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938555"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938555"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938556"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938556"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680938557"><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938557"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([LocVar] -&gt; Set LocVar) -&gt; [LocVar] -&gt; Set LocVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938554"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938555"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938556"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocArg -&gt; LocVar
</span><a href="Gibbon.NewL2.Syntax.html#toLocVar"><span class="hs-identifier hs-var">toLocVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocArg
</span><a href="#local-6989586621680938557"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-451"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AddFixed"><span class="hs-identifier hs-type">Old.AddFixed</span></a></span><span> </span><span id="local-6989586621680938558"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938558"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938558"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-452"></span><span>        </span><span class="annot"><span class="annottext">E2Ext LocArg Ty2
</span><a href="Gibbon.L2.Syntax.html#GetCilkWorkerNum"><span class="hs-identifier hs-var">Old.GetCilkWorkerNum</span></a></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set LocVar
forall a. Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">S.empty</span></a></span><span>
</span><span id="line-453"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#LetAvail"><span class="hs-identifier hs-type">Old.LetAvail</span></a></span><span> </span><span id="local-6989586621680938559"><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938559"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621680938560"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938560"><span class="hs-identifier hs-var">bod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[LocVar]
</span><a href="#local-6989586621680938559"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#union"><span class="hs-operator hs-var">`S.union`</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
forall a. FreeVars a =&gt; a -&gt; Set LocVar
</span><a href="Gibbon.Language.Syntax.html#gFreeVars"><span class="hs-identifier hs-var">gFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938560"><span class="hs-identifier hs-var">bod</span></a></span><span>
</span><span id="line-454"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateTagHere"><span class="hs-identifier hs-type">Old.AllocateTagHere</span></a></span><span> </span><span id="local-6989586621680938561"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938561"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938561"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-455"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#AllocateScalarsHere"><span class="hs-identifier hs-type">Old.AllocateScalarsHere</span></a></span><span> </span><span id="local-6989586621680938562"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938562"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocVar -&gt; Set LocVar
forall a. a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-var">S.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938562"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-456"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPush"><span class="hs-identifier hs-type">Old.SSPush</span></a></span><span> </span><span class="annot"><span class="annottext">SSModality
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938563"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938563"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938564"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938564"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938563"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938564"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-457"></span><span>        </span><span class="annot"><a href="Gibbon.L2.Syntax.html#SSPop"><span class="hs-identifier hs-type">Old.SSPop</span></a></span><span> </span><span class="annot"><span class="annottext">SSModality
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938565"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938565"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680938566"><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938566"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LocVar] -&gt; Set LocVar
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">S.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938565"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LocVar
</span><a href="#local-6989586621680938566"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-458"></span><span>    </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
forall a. FreeVars a =&gt; a -&gt; Set LocVar
</span><a href="Gibbon.Language.Syntax.html#gFreeVars"><span class="hs-identifier hs-var">gFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938508"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#freeLocVars"><span class="hs-identifier hs-type">freeLocVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Gibbon.NewL2.Syntax.html#Exp2"><span class="hs-identifier hs-type">Exp2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Gibbon.Common.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-461"></span><span id="freeLocVars"><span class="annot"><span class="annottext">freeLocVars :: E2 LocArg Ty2 -&gt; [LocVar]
</span><a href="Gibbon.NewL2.Syntax.html#freeLocVars"><span class="hs-identifier hs-var hs-var">freeLocVars</span></a></span></span><span> </span><span id="local-6989586621680938570"><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938570"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; [LocVar]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">S.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Set LocVar -&gt; [LocVar]) -&gt; Set LocVar -&gt; [LocVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/base-4.17.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
</span><a href="Gibbon.NewL2.Syntax.html#allFreeVars"><span class="hs-identifier hs-var">allFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938570"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set LocVar -&gt; Set LocVar -&gt; Set LocVar
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="file:///nix/store/8l12vmymy3adw2m02pf73xq5xjf6mfwp-ghc-9.4.5-doc/share/doc/ghc/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#difference"><span class="hs-operator hs-var">`S.difference`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">E2 LocArg Ty2 -&gt; Set LocVar
forall a. FreeVars a =&gt; a -&gt; Set LocVar
</span><a href="Gibbon.Language.Syntax.html#gFreeVars"><span class="hs-identifier hs-var">gFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">E2 LocArg Ty2
</span><a href="#local-6989586621680938570"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span></pre></body></html>